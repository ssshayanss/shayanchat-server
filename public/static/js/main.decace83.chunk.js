(this["webpackJsonpshayan-chat-client"]=this["webpackJsonpshayan-chat-client"]||[]).push([[0],{111:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},119:function(e,t,s){},150:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(22),n=s.n(c),r=(s(86),s(87),s(4)),i=s(81),o=s(10),l=s(152),u=s(1),d=function(){return Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(u.jsx)(l.a,{animation:"border",variant:"secondary"})})},m=s(157),j="https://shayanchat.herokuapp.com",p=/^[A-Za-z\u0600-\u06FF\s]+$/,b=/^\S+@\S+.\S+$/,f=/^[A-Za-z][A-Za-z0-9]*$/,O=1048576,h=s(15),g=s.n(h),x=s(27),v=s(33),y=s.n(v),N=function(e){var t=new FormData;return t.append("name",e.name),t.append("email",e.email),t.append("username",e.username),t.append("password",e.password),t.append("profilePicture",e.profilePicture),y.a.post("/api/auth/signup",t)},S=function(e){return y.a.post("/api/auth/signin",e)},E=function(){var e=Object(x.a)(g.a.mark((function e(){var t,s,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=localStorage.getItem("SCA_TOKEN"))){e.next=14;break}return e.next=5,y.a.get("/api/auth",{headers:{Authorization:"Bearer ".concat(t)}});case 5:if(s=e.sent,!(a=s.data).success){e.next=11;break}return e.abrupt("return",{success:!0,user:a.user});case 11:return e.abrupt("return",{success:!1});case 12:e.next=15;break;case 14:return e.abrupt("return",{success:!1});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),w=function(e){return y.a.post("/api/auth/reset-password",e)},R=function(e){return""===e.email?{success:!1,message:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:b.test(e.email)?{success:!0}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}},T=s(39),k=s.n(T),P=k.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",k.a.stopTimer),e.addEventListener("mouseleave",k.a.resumeTimer)}}),M=function(e,t){P.fire({icon:e,title:t})},I="[SETTING]SET_LOADING_PAGE",C="[SETTING]SET_LOADING_FORM",_="[SETTING]SELECT_MENU_ITEM",A="[SETTING]SET_SHOW_MODAL",D="[SETTING]SET_MODAL_CONTENT",G="[SETTING]SET_SHOW_CHATS",U="[SETTING]SET_IS_REGISTERED",W="[SETTING]SET_RESET_PASSWORD",F="[SETTING]SET_SEND_MESSAGE_TYPE",H="[SETTING]SET_EDIT_MESSAGE_ID",L="[SETTING]SET_EDIT_MESSAGE_TEXT",z="[SETTING]SET_WINDOW_INNERWIDTH",B="[SETTING]SET_SOCKET",Q=function(e){return{type:I,payload:e}},K=function(e){return{type:C,payload:e}},J=function(e){return{type:_,payload:e}},Z=function(e){return{type:A,payload:e}},$=function(e){return{type:D,payload:e}},q=function(e){return{type:G,payload:e}},X=function(e){return{type:U,payload:e}},Y=function(e){return{type:W,payload:e}},V=function(e){return{type:F,payload:e}},ee=function(e){return{type:B,payload:e}},te="[USER]SET_USER_DATA",se=function(e){return{type:te,payload:e}},ae="[ROOMS]SEND_REQUEST",ce="[ROOMS]REQUEST_SUCCESS",ne="[ROOMS]REQUEST_FAILURE",re="[ROOMS]UPDATE_ROOMS",ie="[ROOMS]DELETE_ROOM",oe=function(){return{type:ae}},le=function(e){return{type:ce,payload:e}},ue=function(e){return{type:ne,payload:e}},de=function(e){return function(t){t(oe()),e.emit("get rooms",(function(e){var s=e.success,a=e.rooms,c=e.error;t(s?le(a):ue(c))}))}},me=function(e){return{type:re,payload:e}},je=function(e){return{type:ie,payload:e}},pe="[ROOM]SEND_REQUEST",be="[ROOM]REQUEST_SUCCESS",fe="[ROOM]REQUEST_FAILURE",Oe="[ROOM]RESET_ROOM",he="[ROOM]UPDATE_ROOM",ge=function(){return{type:Oe}},xe=function(e,t){return function(s){s({type:pe}),e.emit("get room",{id:t},(function(e){var t=e.success,a=e.room,c=e.error;s(t?function(e){return{type:be,payload:e}}(a):function(e){return{type:fe,payload:e}}(c))}))}},ve="[MEMBERS]SEND_REQUEST",ye="[MEMBERS]REQUEST_SUCCESS",Ne="[MEMBERS]REQUEST_FAILURE",Se=function(e,t){return function(s){s({type:ve}),e.emit("get room members",{id:t},(function(e){var t=e.success,a=e.members,c=e.error;s(t?function(e){return{type:ye,payload:e}}(a):function(e){return{type:Ne,payload:e}}(c))}))}},Ee="[MESSAGES]SEND_REQUEST",we="[MESSAGES]REQUEST_SUCCESS",Re="[MESSAGES]REQUEST_FAILURE",Te="[MESSAGES]NEW_MESSAGE",ke="[MESSAGES]UPDATE_MESSAGE",Pe="[MESSAGES]DELETE_MESSAGE",Me=function(e,t){return function(s){s({type:Ee}),e.emit("get messages",{roomId:t},(function(e){var t=e.success,a=e.messages,c=e.error;s(t?function(e){return{type:we,payload:e}}(a):function(e){return{type:Re,payload:e}}(c))}))}},Ie=function(e){return{type:Te,payload:e}},Ce=function(e){return{type:ke,payload:e}},_e=s(155),Ae=s(156),De=(s(111),s(23)),Ge=s(7),Ue=function(e){var t=e.item,s=Object(a.useState)(!1),c=Object(De.a)(s,2),n=c[0],r=c[1];return Object(u.jsxs)("div",{className:"checkbox"===t.type?"checkBox":"formGroup",children:[Object(u.jsxs)("span",{className:"inputIcon",title:t.title,children:["name"===t.name&&Object(u.jsx)(Ge.v,{}),"email"===t.name&&Object(u.jsx)(Ge.g,{}),"username"===t.name&&Object(u.jsx)(Ge.b,{}),"roomName"===t.name&&Object(u.jsx)(Ge.k,{}),new RegExp("password","i").test(t.name)&&Object(u.jsx)(Ge.i,{}),new RegExp("picture","i").test(t.name)&&Object(u.jsx)(Ge.f,{})]}),Object(u.jsx)("input",{className:"file"===t.type?"input file":"checkbox"===t.type?"ml-2":"input",type:new RegExp("password","i").test(t.name)?n?"text":"password":t.type,placeholder:t.placeholder,ref:t.fieldRef,accept:"file"===t.type&&new RegExp("picture","i").test(t.name)?"image/*":null}),new RegExp("password","i").test(t.name)?n?Object(u.jsx)(Ge.d,{className:"eyeIcon",onClick:function(){return r(!1)}}):Object(u.jsx)(Ge.e,{className:"eyeIcon",onClick:function(){return r(!0)}}):null,"checkbox"===t.type&&Object(u.jsx)("label",{className:"lbl",children:t.placeholder})]})},We=function(e){var t=e.name,s=e.items,a=e.submitHandler,c=Object(r.c)((function(e){return e.setting.loadingForm}));return Object(u.jsxs)(_e.a,{className:"d-flex flex-column",onSubmit:a,children:[s.map((function(e,t){return Object(u.jsx)(Ue,{item:e},t)})),Object(u.jsx)(Ae.a,{type:"submit",disabled:c?"disabled":"",children:t})]})},Fe=function(e){var t=e.submitHandler,s=Object(r.b)(),c=Object(a.useRef)(""),n=Object(a.useRef)(""),i=Object(a.useRef)();Object(a.useEffect)((function(){var e=localStorage.getItem("SCA_USERNAME"),t=localStorage.getItem("SCA_PASSWORD");e&&t&&(c.current.value=e,n.current.value=t,i.current.checked=!0)}),[]);return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(We,{name:"\u0648\u0631\u0648\u062f",items:[{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"password",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"remindMe",type:"checkbox",placeholder:"\u0645\u0646 \u0631\u0627 \u0628\u0647 \u062e\u0627\u0637\u0631 \u0628\u0633\u067e\u0627\u0631",fieldRef:i}],submitHandler:function(e){e.preventDefault();var s={username:c.current.value.trim(),password:n.current.value.trim()},a=function(e){return""===e.username?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:f.test(e.username)?""===e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.password.length<8?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a"}:{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a"}}(s),r=a.success,o=a.message;r?(i.current.checked?(localStorage.setItem("SCA_USERNAME",s.username),localStorage.setItem("SCA_PASSWORD",s.password)):(localStorage.removeItem("SCA_USERNAME"),localStorage.removeItem("SCA_PASSWORD")),t(s)):M("error",o)}}),Object(u.jsxs)("div",{className:"formActions",children:[Object(u.jsx)("span",{className:"formAction ml-1",onClick:function(){return s(Y(!0))},children:"\u0628\u0627\u0632\u06cc\u0627\u0628\u06cc \u0631\u0645\u0632\u0639\u0628\u0648\u0631"}),"/",Object(u.jsx)("span",{className:"formAction mr-1",onClick:function(){return s(X(!1))},children:"\u062b\u0628\u062a\u200c\u0646\u0627\u0645"})]})]})})},He=function(e){var t=e.submitHandler,s=Object(r.b)(),c=Object(a.useRef)(""),n=Object(a.useRef)(""),i=Object(a.useRef)(""),o=Object(a.useRef)(""),l=Object(a.useRef)(""),d=Object(a.useRef)("");return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(We,{name:"\u062b\u0628\u062a\u200c\u0646\u0627\u0645",items:[{name:"name",type:"text",title:"\u0646\u0627\u0645\u200c",placeholder:"\u0646\u0627\u0645\u200c \u0648 \u0646\u0627\u0645\u200c\u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:i},{name:"password",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:o},{name:"confirmPassword",type:"password",title:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f",fieldRef:l},{name:"profilePicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644",fieldRef:d}],submitHandler:function(e){e.preventDefault();var s={name:c.current.value.trim(),email:n.current.value.trim(),username:i.current.value.trim(),password:o.current.value.trim(),confirmPassword:l.current.value.trim(),profilePicture:d.current.files[0]},a=function(e){return""===e.name?{success:!1,message:"\u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:p.test(e.name)&&e.name.length>=3?""===e.email?{success:!1,message:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:b.test(e.email)?""===e.username?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:f.test(e.username)?""===e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.password.length<8?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 \u0634\u0627\u0645\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627\u0634\u062f"}:e.confirmPassword!==e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u06cc\u06a9\u0633\u0627\u0646 \u0646\u06cc\u0633\u062a"}:e.profilePicture&&"image/jpeg"!==e.profilePicture.type&&"image/jpg"!==e.profilePicture.type&&"image/png"!==e.profilePicture.type?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.profilePicture&&e.profilePicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648 \u0627\u0639\u062f\u0627\u062f \u0628\u0627\u0634\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u0635\u062d\u06cc\u062d \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}}(s),r=a.success,u=a.message;r?t(s):M("error",u)}}),Object(u.jsx)("div",{className:"formActions",children:Object(u.jsx)("span",{className:"formAction",onClick:function(){return s(X(!0))},children:"\u0648\u0631\u0648\u062f"})})]})})},Le=function(){var e=Object(r.b)(),t=Object(a.useRef)(""),s=function(){var s=Object(x.a)(g.a.mark((function s(a){var c,n,r,i,o;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a.preventDefault(),s.prev=1,c={email:t.current.value.trim()},n=R(c),r=n.success,i=n.message,r){s.next=8;break}M("error",i),s.next=14;break;case 8:return e(K(!0)),s.next=11,w(c);case 11:o=s.sent,M("success",o.data.message),e(K(!1));case 14:s.next=20;break;case 16:s.prev=16,s.t0=s.catch(1),e(K(!1)),M("error",s.t0.response.data.message);case 20:case"end":return s.stop()}}),s,null,[[1,16]])})));return function(e){return s.apply(this,arguments)}}();return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(We,{name:"\u0628\u0627\u0632\u06cc\u0627\u0628\u06cc \u0631\u0645\u0632 \u0639\u0628\u0648\u0631",items:[{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:t}],submitHandler:s}),Object(u.jsx)("div",{className:"formActions",children:Object(u.jsx)("span",{className:"formAction",onClick:function(){e(X(!0)),e(Y(!1))},children:"\u0648\u0631\u0648\u062f"})})]})})},ze=(s(113),function(e){var t=e.history,s=Object(r.c)((function(e){return{selectedMenuItem:e.setting.selectedMenuItem,socket:e.setting.socket}})),a=s.selectedMenuItem,c=s.socket,n=Object(r.b)();return Object(u.jsxs)("div",{className:"menu-bar",children:[Object(u.jsx)("h1",{className:"brand",children:"ShayanChat"}),Object(u.jsxs)("div",{className:"icons-container",children:[Object(u.jsx)("div",{className:"profile"===a?"icon active":"icon",onClick:function(){return n(J("profile"))},title:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644",children:Object(u.jsx)(Ge.q,{})}),Object(u.jsx)("div",{className:"chats"===a?"icon active":"icon",onClick:function(){return n(J("chats"))},title:"\u0686\u062a\u200c\u0647\u0627",children:Object(u.jsx)(Ge.n,{})}),Object(u.jsx)("div",{className:"icon",title:"\u062e\u0631\u0648\u062c",onClick:function(){c.disconnect(0),n(ee(null)),n(ge()),localStorage.removeItem("SCA_TOKEN"),t.push("/auth")},children:Object(u.jsx)(Ge.s,{})})]})]})}),Be=(s(114),function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=function(){""===s.current.value.trim()?t(de(e)):t(function(e,t){return function(s){s(oe()),""!==t.trim()&&e.emit("search rooms",{search:t},(function(e){var t=e.success,a=e.rooms,c=e.error;s(t?le(a):ue(c))}))}}(e,s.current.value.trim()))};return Object(u.jsxs)("div",{className:"search-box",children:[Object(u.jsx)("input",{className:"input",type:"text",placeholder:"\u062c\u0633\u062a\u062c\u0648 ...",ref:s,onChange:c}),Object(u.jsx)(Ge.r,{className:"icon",onClick:c})]})}),Qe=(s(115),function(){var e=Object(r.b)();return Object(u.jsxs)("div",{className:"chat-list-header",children:[Object(u.jsx)("h3",{children:"\u0686\u062a\u200c\u0647\u0627"}),Object(u.jsx)("span",{className:"plus-icon",title:"\u0633\u0627\u062e\u062a \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f",onClick:function(){e($("createNewRoom")),e(Z(!0))},children:Object(u.jsx)(Ge.l,{})})]})}),Ke=function(e){var t=e.room,s=e.active,a=Object(r.c)((function(e){return e.setting.socket})),c=Object(r.b)();return Object(u.jsx)("div",{onClick:function(){c(xe(a,t.id)),c(q(!0))},className:s?"chat-item active":"chat-item",children:Object(u.jsxs)("div",{className:"chat-item-info",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)("img",{className:"picture",src:t.roomPicture?"".concat(j,"/roomPictures/").concat(t.roomPicture):"/images/room.jpg",alt:t.name})}),Object(u.jsx)("div",{className:"text-container",children:Object(u.jsx)("span",{className:"name",children:t.name})})]})})},Je=function(){var e=Object(r.c)((function(e){return{rooms:e.rooms,currentRoom:e.room.data}})),t=e.rooms,s=e.currentRoom;return Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)(Qe,{}),Object(u.jsx)(Be,{}),Object(u.jsx)("div",{className:t.loading?"chat-list text-center":"chat-list",children:t.loading?Object(u.jsx)(l.a,{animation:"border",variant:"secondary"}):Object(u.jsx)(a.Fragment,{children:t.data.map((function(e){return Object(u.jsx)(Ke,{room:e,active:s.id===e.id},e.id)}))})})]})},Ze=(s(116),function(e){var t=e.history,s=Object(a.useState)(!1),c=Object(De.a)(s,2),n=c[0],i=c[1],o=Object(r.c)((function(e){return{socket:e.setting.socket,user:e.user}})),l=o.socket,d=o.user,m=Object(r.b)();return Object(u.jsxs)(a.Fragment,{children:[Object(u.jsxs)("div",{className:"profile-header",children:[Object(u.jsx)("h3",{children:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}),Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Ge.c,{className:"action-icon",onClick:function(){return i(!n)}}),Object(u.jsxs)("div",{className:n?"actions-popover":"d-none",children:[Object(u.jsxs)("span",{className:"action",onClick:function(){m($("editProfile")),m(Z(!0))},children:[Object(u.jsx)(Ge.o,{className:"ml-2"}),"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"]}),Object(u.jsxs)("span",{className:"action",onClick:function(){m($("changePassword")),m(Z(!0))},children:[Object(u.jsx)(Ge.i,{className:"ml-2"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631"]}),Object(u.jsxs)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&l.emit("delete acount",(function(e){var s=e.success,a=e.message;s?(localStorage.removeItem("SCA_TOKEN"),l.disconnect(0),m(ee(null)),t.push("/auth"),M("success",a)):M("error",a)}))},children:[Object(u.jsx)(Ge.p,{className:"ml-2"}),"\u062d\u0630\u0641 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc"]})]})]})]}),Object(u.jsxs)("div",{className:"profile-info",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)("img",{className:"picture",src:d.profilePicture?"".concat(j,"/profilePictures/").concat(d.profilePicture):"/images/user.png",alt:d.name})}),Object(u.jsx)("span",{className:"name",children:d.name})]}),Object(u.jsxs)("div",{className:"profile-detail",children:[Object(u.jsx)("div",{className:"header",children:Object(u.jsx)("span",{children:"\u0645\u0634\u062e\u0635\u0627\u062a"})}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0646\u0627\u0645"}),Object(u.jsx)("span",{children:d.name})]}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0627\u06cc\u0645\u06cc\u0644"}),Object(u.jsx)("span",{children:d.email})]}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc"}),Object(u.jsx)("span",{children:d.username})]})]})]})}),$e=(s(117),function(){var e=Object(r.c)((function(e){return{windowInnerWidth:e.setting.windowInnerWidth,room:e.room.data}})),t=e.windowInnerWidth,s=e.room,a=Object(r.b)();return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{className:"right-side",children:[t<768&&Object(u.jsx)(Ge.a,{className:"back-icon",onClick:function(){return a(q(!1))}}),Object(u.jsx)("img",{className:"picture",src:s.roomPicture?"".concat(j,"/roomPictures/").concat(s.roomPicture):"/images/room.jpg",alt:s.name}),Object(u.jsx)("span",{className:"room-name",children:s.name})]}),Object(u.jsx)(Ge.c,{onClick:function(){a($("roomInfo")),a(Z(!0))},className:"ellipsis-icon"})]})}),qe=function(e){var t=e.message,s=Object(a.useState)(!1),c=Object(De.a)(s,2),n=c[0],i=c[1],o=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data}})),l=o.socket,d=o.room,m=Object(r.b)();return Object(u.jsxs)("div",{className:"message-container",children:[Object(u.jsx)("img",{className:"picture ml-2",src:t.sender.profilePicture?"".concat(j,"/profilePictures/").concat(t.sender.profilePicture):"/images/user.png",alt:t.sender.name}),Object(u.jsxs)("div",{className:t.isOwner?"message-text me":"message-text you",children:[Object(u.jsx)("span",{className:"name",children:t.sender.name}),Object(u.jsx)("span",{className:"message",children:t.text}),Object(u.jsxs)("span",{className:"time",children:[Object(u.jsx)(Ge.m,{})," ",t.date.split("-")[1]]})]}),t.isOwner&&Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Ge.c,{style:{cursor:"pointer"},onClick:function(){return i(!n)}}),Object(u.jsxs)("div",{className:n?"actions-popover":"d-none",children:[Object(u.jsx)("span",{className:"action",onClick:function(){var e,s;m(V(1)),m((e=t.text,{type:L,payload:e})),m((s=t.id,{type:H,payload:s})),i(!1)},children:"\u0648\u06cc\u0631\u0627\u06cc\u0634"}),Object(u.jsx)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u067e\u06cc\u0627\u0645 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&l.emit("delete message",{roomId:d.id,messageId:t.id}),i(!1)},children:"\u062d\u0630\u0641"})]})]})]})},Xe=function(e){var t=e.date,s=e.messages;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"text-center text-muted my-2",children:Object(u.jsx)("span",{className:"date-span",children:t})}),s.map((function(e){return Object(u.jsx)(qe,{message:e},e.id)}))]})},Ye=function(){var e=Object(a.useRef)(),t=Object(r.c)((function(e){return{socket:e.setting.socket,messages:e.messages,user:e.user,room:e.room,sendMessageType:e.setting.sendMessageType,editMessageText:e.setting.editMessageText}})),s=t.socket,c=t.messages,n=t.user,i=t.room,o=t.sendMessageType,l=t.editMessageText,m=Object(r.b)();return Object(a.useEffect)((function(){return s&&m(Me(s,i.data.id)),function(){m(V(0))}}),[]),Object(a.useEffect)((function(){return s&&s.on("new message",function(){var t=Object(x.a)(g.a.mark((function t(s){var a,c,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.roomId,c=s.newMessage,r=s.updateMessage,o=s.deleteMessage;try{a.toString()===i.data.id.toString()&&(c?(c.isOwner=c.sender.email===n.email,m(Ie(c)),e.current.scroll(0,e.current.scrollHeight)):r?(r.isOwner=r.sender.email===n.email,m(Ce(r))):o&&m({type:Pe,payload:o}))}catch(l){}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),function(){s&&s.off("new message")}}),[s]),Object(a.useEffect)((function(){e.current.scroll(0,e.current.scrollHeight)}),[c.data]),Object(u.jsx)("div",{ref:e,className:"body",children:c.loading?Object(u.jsx)(d,{}):Object(u.jsxs)(a.Fragment,{children:[c.data&&Object.keys(c.data).map((function(e,t){return Object(u.jsx)(Xe,{date:e,messages:c.data[e]},t)})),1===o&&Object(u.jsxs)("div",{className:"edit-box",children:[Object(u.jsx)(Ge.u,{style:{cursor:"pointer"},onClick:function(){return m(V(0))}}),Object(u.jsx)("span",{className:"edit-box-text text-muted",children:l})]})]})})},Ve=s(76),et=s.n(Ve),tt=function(){var e=Object(a.useRef)(""),t=Object(a.useState)(!1),s=Object(De.a)(t,2),c=s[0],n=s[1],i=Object(r.c)((function(e){return{socket:e.setting.socket,loadingForm:e.setting.loadingForm,room:e.room.data,sendMessageType:e.setting.sendMessageType,editMessageId:e.setting.editMessageId,editMessageText:e.setting.editMessageText}})),o=i.socket,l=i.loadingForm,d=i.room,m=i.sendMessageType,j=i.editMessageId,p=i.editMessageText,b=Object(r.b)();Object(a.useEffect)((function(){1===m&&e.current?e.current.value=p:e.current&&(e.current.value="")}),[m,j]);var f=function(){var t=e.current.value.trim();""!==t&&(b(K(!0)),0===m?o.emit("send message",{message:t,roomId:d.id}):o.emit("edit message",{message:t,roomId:d.id,messageId:j}),b(V(0)),n(!1),e.current.value="",setTimeout((function(){b(K(!1))}),1e3))};return Object(u.jsx)("div",{className:"footer",children:d.isJoined?Object(u.jsxs)("div",{className:l?"chat-box disable":"chat-box",children:[Object(u.jsx)("input",{className:"input",onKeyPress:function(e){"Enter"===e.key&&f()},ref:e}),Object(u.jsx)(Ge.h,{className:"mx-1",style:{cursor:"pointer"},onClick:function(){return n(!c)}}),Object(u.jsx)("span",{className:c?"picker":"d-none",children:Object(u.jsx)(et.a,{disableSearchBar:!0,onEmojiClick:function(t,s){return e.current.value+=s.emoji}})}),Object(u.jsx)(Ge.j,{className:"mx-1",style:{cursor:"pointer"},onClick:f})]}):Object(u.jsx)(Ae.a,{className:"w-100",onClick:function(){o.emit("join room",{id:d.id},(function(e){var t=e.success,s=e.message;M(t?"success":"error",s),b(xe(o,d.id))}))},children:"\u0639\u0636\u0648\u06cc\u062a \u062f\u0631 \u06af\u0631\u0648\u0647"})})},st=function(){return Object(u.jsxs)("div",{className:"chat-content-container",children:[Object(u.jsx)($e,{}),Object(u.jsx)(Ye,{}),Object(u.jsx)(tt,{})]})},at=s(154),ct=(s(118),function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=Object(a.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0627\u06cc\u062c\u0627\u062f \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f"}),Object(u.jsx)(We,{name:"\u0627\u06cc\u062c\u0627\u062f \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f",items:[{name:"roomName",type:"text",title:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647",placeholder:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"roomPicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u06af\u0631\u0648\u0647",fieldRef:c}],submitHandler:function(a){a.preventDefault();var n={roomName:s.current.value.trim(),roomPicture:{data:c.current.files[0],name:c.current.files[0]?c.current.files[0].name:null,mimetype:c.current.files[0]?c.current.files[0].type:null,size:c.current.files[0]?c.current.files[0].size:null}},r=function(e){return""===e.roomName?{success:!1,message:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.roomPicture.data&&"image/jpeg"!==e.roomPicture.mimetype&&"image/jpg"!==e.roomPicture.mimetype&&"image/png"!==e.roomPicture.mimetype?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.roomPicture.data&&e.roomPicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}}(n),i=r.success,o=r.message;i?(t(K(!0)),e.emit("create new room",n,(function(e){var s=e.success,a=e.message,c=e.roomData;s?(t(Z(!1)),t(me(c)),M("success",a)):M("error",a),t(K(!1))}))):M("error",o)}})]})}),nt=function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=Object(a.useRef)(""),n=Object(a.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}),Object(u.jsx)(We,{name:"\u0648\u06cc\u0631\u0627\u06cc\u0634",items:[{name:"name",type:"text",title:"\u0646\u0627\u0645\u200c",placeholder:"\u0646\u0627\u0645\u200c \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n}],submitHandler:function(a){a.preventDefault();var r={name:s.current.value.trim(),email:c.current.value.trim(),username:n.current.value.trim()},i=function(e){return""===e.name||p.test(e.name)&&e.name.length>=3?""===e.email||b.test(e.email)?""===e.username||f.test(e.username)?{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648 \u0627\u0639\u062f\u0627\u062f \u0628\u0627\u0634\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u0635\u062d\u06cc\u062d \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}}(r),o=i.success,l=i.message;o?(r.name||r.email||r.username)&&(t(K(!0)),e.emit("edit profile",r,(function(e){var s=e.success,a=e.message,c=e.user;s?(M("success",a),t(se(c)),t(Z(!1))):M("error",a),t(K(!1))}))):M("error",l)}})]})},rt=function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=Object(a.useRef)(""),n=Object(a.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631"}),Object(u.jsx)(We,{name:"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631",items:[{name:"oldPassword",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"newPassword",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"confirmNewPassword",type:"password",title:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f",fieldRef:n}],submitHandler:function(a){a.preventDefault();var r={oldPassword:s.current.value.trim(),newPassword:c.current.value.trim(),confirmNewPassword:n.current.value.trim()},i=function(e){return""===e.oldPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:""===e.newPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.newPassword.length<8?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 \u0634\u0627\u0645\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627\u0634\u062f"}:e.confirmNewPassword!==e.newPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u06cc\u06a9\u0633\u0627\u0646 \u0646\u06cc\u0633\u062a"}:{success:!0}}(r),o=i.success,l=i.message;o?(t(K(!0)),e.emit("change password",r,(function(e){var s=e.success,a=e.message;s?(M("success",a),t(Z(!1))):M("error",a),t(K(!1))}))):M("error",l)}})]})},it=(s(119),function(e){var t=e.member;return Object(u.jsxs)("div",{className:"member-container",children:[Object(u.jsxs)("div",{className:"picture-container",children:[Object(u.jsx)("img",{className:"picture",src:t.profilePicture?"".concat(j,"/profilePictures/").concat(t.profilePicture):"/images/user.png",alt:t.name}),Object(u.jsx)("span",{className:t.isOnline?"online-badge bg-success":"online-badge bg-secondary"})]}),Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsxs)("span",{children:[t.name," ",t.isOwner&&Object(u.jsx)(Ge.t,{})]}),Object(u.jsx)("span",{className:"text-muted small",children:t.isOnline?"Online":t.lastSeen})]})]})}),ot=function(){var e=Object(a.useState)(!1),t=Object(De.a)(e,2),s=t[0],c=t[1],n=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room,members:e.members}})),i=n.socket,o=n.room,d=n.members,m=Object(r.b)();Object(a.useEffect)((function(){i&&m(Se(i,o.data.id))}),[]);return Object(u.jsxs)("div",{className:"room-info-modal",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("img",{className:"room-picture",src:o.data.roomPicture?"".concat(j,"/roomPictures/").concat(o.data.roomPicture):"/images/room.jpg",alt:o.data.name}),Object(u.jsxs)("div",{className:"d-flex flex-column text-right",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:o.data.name}),Object(u.jsx)("span",{className:"text-muted small",children:o.data.id})]}),o.data.isJoined&&Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Ge.c,{className:"action-icon",onClick:function(){return c(!s)}}),Object(u.jsxs)("div",{className:s?"actions-popover":"d-none",children:[o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){m($("editGroup")),m(Z(!0))},children:[Object(u.jsx)(Ge.o,{className:"ml-2"}),"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u06af\u0631\u0648\u0647"]}),o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u06af\u0631\u0648\u0647 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&(m(Z(!1)),m(Q(!0)),i.emit("delete room",{id:o.data.id},(function(e){var t=e.success,s=e.message;t?(m(je(o.data)),m(ge()),M("success",s)):M("error",s),m(Q(!1))})))},children:[Object(u.jsx)(Ge.p,{className:"ml-2"}),"\u062d\u0630\u0641 \u06af\u0631\u0648\u0647"]}),!o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){i.emit("leave room",{id:o.data.id},(function(e){var t=e.success,s=e.message;t?(M("success",s),m(je(o.data)),m(Z(!1)),m(ge())):M("error",s)}))},children:[Object(u.jsx)(Ge.s,{className:"ml-2"}),"\u062e\u0631\u0648\u062c \u0627\u0632 \u06af\u0631\u0648\u0647"]})]})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h6",{className:"px-3 py-2",children:"\u0627\u0639\u0636\u0627\u06cc \u06af\u0631\u0648\u0647"}),Object(u.jsx)("div",{className:"scroller",children:d.loading?Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(u.jsx)(l.a,{animation:"border",variant:"secondary"})}):d.data.map((function(e,t){return Object(u.jsx)(it,{member:e},t)}))})]})]})},lt=function(){var e=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data}})),t=e.socket,s=e.room,c=Object(r.b)(),n=Object(a.useRef)(""),i=Object(a.useRef)();return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u06af\u0631\u0648\u0647"}),Object(u.jsx)(We,{name:"\u0648\u06cc\u0631\u0627\u06cc\u0634",items:[{name:"roomName",type:"text",title:"\u0646\u0627\u0645\u200c \u06af\u0631\u0648\u0647",placeholder:"\u0646\u0627\u0645\u200c \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"roomPicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u06af\u0631\u0648\u0647",fieldRef:i}],submitHandler:function(e){e.preventDefault();var a={id:s.id,roomName:n.current.value.trim(),roomPicture:{data:i.current.files[0],name:i.current.files[0]?i.current.files[0].name:null,mimetype:i.current.files[0]?i.current.files[0].type:null,size:i.current.files[0]?i.current.files[0].size:null}},r=function(e){return e.roomPicture.data&&"image/jpeg"!==e.roomPicture.mimetype&&"image/jpg"!==e.roomPicture.mimetype&&"image/png"!==e.roomPicture.mimetype?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.roomPicture.data&&e.roomPicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}}(a),o=r.success,l=r.message;o?(a.roomName||a.roomPicture.data)&&(c(K(!0)),t.emit("edit room",a,(function(e){var t=e.success,s=e.message;t?(M("success",s),c(Z(!1))):M("error",s),c(K(!1))}))):M("error",l)}})]})},ut=function(){var e=Object(r.c)((function(e){return{showModal:e.setting.showModal,modalContent:e.setting.modalContent}})),t=e.showModal,s=e.modalContent,a=Object(r.b)();return Object(u.jsx)(at.a,{show:t,onHide:function(){return a(Z(!1))},centered:!0,children:Object(u.jsxs)("div",{className:"p-3",children:["createNewRoom"===s&&Object(u.jsx)(ct,{}),"editProfile"===s&&Object(u.jsx)(nt,{}),"changePassword"===s&&Object(u.jsx)(rt,{}),"roomInfo"===s&&Object(u.jsx)(ot,{}),"editGroup"===s&&Object(u.jsx)(lt,{})]})})},dt=function(e){var t=e.history;return Object(a.useEffect)((function(){E().then((function(e){e.success?t.push("/chat"):t.push("/auth")}))}),[]),Object(u.jsx)(d,{})},mt=function(e){var t=e.history,s=Object(r.c)((function(e){return{loadingPage:e.setting.loadingPage,isRegister:e.setting.isRegister,resetPassword:e.setting.resetPassword}})),c=s.loadingPage,n=s.isRegister,i=s.resetPassword,o=Object(r.b)();Object(a.useEffect)((function(){return E().then((function(e){e.success&&t.push("/chat"),setTimeout((function(){o(Q(!1))}),1e3)})),function(){o(Q(!0))}}),[]);var l=function(){var e=Object(x.a)(g.a.mark((function e(s){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o(K(!0)),!s.confirmPassword){e.next=9;break}return e.next=5,N(s);case 5:a=e.sent,o(X(!0)),e.next=14;break;case 9:return e.next=11,S(s);case 11:a=e.sent,localStorage.setItem("SCA_TOKEN",a.data.token),t.push("/chat");case 14:o(K(!1)),M("success",a.data.message),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),o(K(!1)),M("error",e.t0.response.data.message);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"d-flex flex-column align-items-center text-center justify-content-center h-100",children:c?Object(u.jsx)(d,{}):Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)("h1",{className:"appBrand mb-3",children:"ShayanChat"}),Object(u.jsx)("h3",{className:"mb-3 pb-3",children:i?"\u0628\u0627\u0632\u06cc\u0627\u0628\u06cc \u0631\u0645\u0632\u0639\u0628\u0648\u0631":n?"\u0648\u0631\u0648\u062f":"\u0639\u0636\u0648\u06cc\u062a"}),i?Object(u.jsx)(Le,{}):n?Object(u.jsx)(Fe,{submitHandler:l}):Object(u.jsx)(He,{submitHandler:l})]})})},jt=s(153),pt=s(75),bt=s(78),ft=s.n(bt),Ot=function(e){var t=e.history,s=Object(r.c)((function(e){return{loadingPage:e.setting.loadingPage,selectedMenuItem:e.setting.selectedMenuItem,showChats:e.setting.showChats,room:e.room,windowInnerWidth:e.setting.windowInnerWidth,socket:e.setting.socket}})),c=s.loadingPage,n=s.selectedMenuItem,i=s.showChats,o=s.room,l=s.windowInnerWidth,m=s.socket,j=Object(r.b)(),p=function(){j({type:z})};return Object(a.useEffect)((function(){return E().then((function(e){var s=e.success,a=e.user;s?(j(se(a)),m||j(ee(ft()({query:{token:localStorage.getItem("SCA_TOKEN")}}))),setTimeout((function(){j(Q(!1))}),1e3),window.addEventListener("resize",p)):t.push("/auth")})),function(){j(Q(!0)),window.removeEventListener("resize",p)}}),[]),Object(a.useEffect)((function(){return m&&(j(de(m)),m.emit("join to rooms"),m.on("change room data",(function(e){var t=e.room;j(function(e){return{type:he,payload:e}}(t)),j(me(t))}))),function(){m&&m.off("change room data")}}),[m]),Object(u.jsx)("div",{className:"d-flex h-100",children:c?Object(u.jsx)(d,{}):Object(u.jsxs)(a.Fragment,{children:[(l>768||!i)&&Object(u.jsx)(ze,{history:t}),Object(u.jsxs)(jt.a,{className:"h-100 w-100 m-0",children:[Object(u.jsx)(pt.a,{className:i&&l<768?"d-none":"p-0",lg:4,md:5,children:Object(u.jsxs)("div",{className:"chat-right-side-bar",children:["profile"===n&&Object(u.jsx)(Ze,{history:t}),"chats"===n&&Object(u.jsx)(Je,{})]})}),Object(u.jsx)(pt.a,{className:l>768||i?"p-0 bg-light":"d-none",lg:8,md:7,children:o.loading?Object(u.jsx)(d,{}):o.data.name?Object(u.jsx)(st,{}):Object(u.jsxs)("div",{className:"empty-chat-box",children:[l<768&&Object(u.jsx)(Ge.a,{className:"back-icon",onClick:function(){return j(q(!1))}}),o.error?o.error:"ShayanChat"]})})]})]})})},ht=s(26),gt=s(79),xt=s(80),vt=s(9),yt={loadingPage:!0,loadingForm:!1,selectedMenuItem:"chats",showModal:!1,modalContent:"",isRegister:!0,resetPassword:!1,showChats:!1,sendMessageType:0,editMessageId:0,editMessageText:"",windowInnerWidth:window.innerWidth,socket:null},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(vt.a)(Object(vt.a)({},e),{},{loadingPage:t.payload});case C:return Object(vt.a)(Object(vt.a)({},e),{},{loadingForm:t.payload});case _:return Object(vt.a)(Object(vt.a)({},e),{},{selectedMenuItem:t.payload});case A:return Object(vt.a)(Object(vt.a)({},e),{},{showModal:t.payload});case D:return Object(vt.a)(Object(vt.a)({},e),{},{modalContent:t.payload});case G:return Object(vt.a)(Object(vt.a)({},e),{},{showChats:t.payload});case U:return Object(vt.a)(Object(vt.a)({},e),{},{isRegister:t.payload});case W:return Object(vt.a)(Object(vt.a)({},e),{},{resetPassword:t.payload});case F:return Object(vt.a)(Object(vt.a)({},e),{},{sendMessageType:t.payload});case H:return Object(vt.a)(Object(vt.a)({},e),{},{editMessageId:t.payload});case L:return Object(vt.a)(Object(vt.a)({},e),{},{editMessageText:t.payload});case z:return Object(vt.a)(Object(vt.a)({},e),{},{windowInnerWidth:window.innerWidth});case B:return Object(vt.a)(Object(vt.a)({},e),{},{socket:t.payload});default:return e}},St={},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return t.payload;default:return e}},wt={loading:!1,data:[],error:""},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(vt.a)(Object(vt.a)({},e),{},{loading:!0});case ce:return{loading:!1,data:t.payload,error:""};case ne:return{loading:!1,data:[],error:t.payload};case re:var s=e.data.findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==s?(t.payload.name&&(e.data[s].name=t.payload.name),t.payload.roomPicture&&(e.data[s].roomPicture=t.payload.roomPicture)):e.data.push(t.payload),{loading:!1,data:e.data,error:""};case ie:var a=e.data.findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==a&&e.data.splice(a,1),{loading:!1,data:e.data,error:""};default:return e}},Tt={loading:!1,data:{},error:""},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case pe:return Object(vt.a)(Object(vt.a)({},e),{},{loading:!0});case be:return{loading:!1,data:t.payload,error:""};case fe:return{loading:!1,data:{},error:t.payload};case Oe:return{loading:!1,data:{},error:""};case he:return e.data.id&&e.data.id.toString()===t.payload.id.toString()&&(t.payload.name&&(e.data.name=t.payload.name),t.payload.roomPicture&&(e.data.roomPicture=t.payload.roomPicture)),{loading:!1,data:e.data,error:""};default:return e}},Pt={loading:!1,data:[],error:""},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(vt.a)(Object(vt.a)({},e),{},{loading:!0});case ye:return{loading:!1,data:t.payload,error:""};case Ne:return{loading:!1,data:[],error:t.payload};default:return e}},It={loading:!1,data:{},error:""},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(vt.a)(Object(vt.a)({},e),{},{loading:!0});case we:return{loading:!1,data:t.payload,error:""};case Re:return{loading:!1,data:{},error:t.payload};case Te:var s=t.payload.date.split("-")[0];return e.data[s]||(e.data[s]=[]),e.data[s].push(t.payload),{loading:!1,data:e.data,error:""};case ke:var a=t.payload.date.split("-")[0],c=e.data[a].findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==c&&(e.data[a][c]=t.payload),{loading:!1,data:e.data,error:""};case Pe:var n=t.payload.date.split("-")[0],r=e.data[n].findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==r&&e.data[n].splice(r,1),0===e.data[n].length&&delete e.data[n],{loading:!1,data:e.data,error:""};default:return e}},_t=Object(ht.combineReducers)({setting:Nt,user:Et,rooms:Rt,room:kt,members:Mt,messages:Ct}),At=Object(ht.createStore)(_t,Object(gt.composeWithDevTools)(Object(ht.applyMiddleware)(xt.a))),Dt=function(){return Object(u.jsx)(r.a,{store:At,children:Object(u.jsxs)(i.a,{children:[Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:dt}),Object(u.jsx)(o.a,{path:"/auth",component:mt}),Object(u.jsx)(o.a,{path:"/chat",component:Ot})]}),Object(u.jsx)(ut,{})]})})};n.a.render(Object(u.jsx)(Dt,{}),document.getElementById("root"))},87:function(e,t,s){}},[[150,1,2]]]);
//# sourceMappingURL=main.decace83.chunk.js.map
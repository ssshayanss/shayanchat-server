(this["webpackJsonpshayan-chat-client"]=this["webpackJsonpshayan-chat-client"]||[]).push([[0],{110:function(e,t,s){},112:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},149:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s(21),n=s.n(c),r=(s(85),s(86),s(4)),i=s(80),o=s(10),l=s(151),u=s(1),d=function(){return Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(u.jsx)(l.a,{animation:"border",variant:"secondary"})})},m=s(156),j="https://shayanchat.herokuapp.com/",p=/^[A-Za-z\u0600-\u06FF\s]+$/,b=/^\S+@\S+.\S+$/,f=/^[A-Za-z][A-Za-z0-9]*$/,O=1048576,h=s(23),g=s.n(h),x=s(28),v=s(37),y=s.n(v),N=function(e){var t=new FormData;return t.append("name",e.name),t.append("email",e.email),t.append("username",e.username),t.append("password",e.password),t.append("profilePicture",e.profilePicture),y.a.post("/api/auth/signup",t)},S=function(e){return y.a.post("/api/auth/signin",e)},E=function(){var e=Object(x.a)(g.a.mark((function e(){var t,s,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=localStorage.getItem("SCA_TOKEN"))){e.next=14;break}return e.next=5,y.a.get("/api/auth",{headers:{Authorization:"Bearer ".concat(t)}});case 5:if(s=e.sent,!(a=s.data).success){e.next=11;break}return e.abrupt("return",{success:!0,user:a.user});case 11:return e.abrupt("return",{success:!1});case 12:e.next=15;break;case 14:return e.abrupt("return",{success:!1});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),w=s(38),R=s.n(w),T=R.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",R.a.stopTimer),e.addEventListener("mouseleave",R.a.resumeTimer)}}),k=function(e,t){T.fire({icon:e,title:t})},P="[SETTING]SET_LOADING_PAGE",M="[SETTING]SET_LOADING_FORM",I="[SETTING]SELECT_MENU_ITEM",C="[SETTING]SET_SHOW_MODAL",_="[SETTING]SET_MODAL_CONTENT",A="[SETTING]SET_SHOW_CHATS",D="[SETTING]SET_IS_REGISTERED",G="[SETTING]SET_SEND_MESSAGE_TYPE",U="[SETTING]SET_EDIT_MESSAGE_ID",W="[SETTING]SET_EDIT_MESSAGE_TEXT",H="[SETTING]SET_WINDOW_INNERWIDTH",F="[SETTING]SET_SOCKET",L=function(e){return{type:P,payload:e}},z=function(e){return{type:M,payload:e}},B=function(e){return{type:I,payload:e}},Q=function(e){return{type:C,payload:e}},K=function(e){return{type:_,payload:e}},J=function(e){return{type:A,payload:e}},Z=function(e){return{type:D,payload:e}},$=function(e){return{type:G,payload:e}},q=function(e){return{type:F,payload:e}},X="[USER]SET_USER_DATA",Y=function(e){return{type:X,payload:e}},V="[ROOMS]SEND_REQUEST",ee="[ROOMS]REQUEST_SUCCESS",te="[ROOMS]REQUEST_FAILURE",se="[ROOMS]UPDATE_ROOMS",ae=function(e,t){return function(s){var a=t&&""!==t?t:{};s({type:V}),e.emit("get rooms",a,(function(e){var t=e.success,a=e.rooms,c=e.error;s(t?function(e){return{type:ee,payload:e}}(a):function(e){return{type:te,payload:e}}(c))}))}},ce="[ROOM]SEND_REQUEST",ne="[ROOM]REQUEST_SUCCESS",re="[ROOM]REQUEST_FAILURE",ie="[ROOM]RESET_ROOM",oe="[ROOM]UPDATE_ROOM",le=function(){return{type:ie}},ue=function(e,t){return function(s){s({type:ce}),e.emit("get room",{id:t},(function(e){var t=e.success,a=e.room,c=e.error;s(t?function(e){return{type:ne,payload:e}}(a):function(e){return{type:re,payload:e}}(c))}))}},de="[MEMBERS]SEND_REQUEST",me="[MEMBERS]REQUEST_SUCCESS",je="[MEMBERS]REQUEST_FAILURE",pe=function(e,t){return function(s){s({type:de}),e.emit("get room members",{id:t},(function(e){var t=e.success,a=e.members,c=e.error;s(t?function(e){return{type:me,payload:e}}(a):function(e){return{type:je,payload:e}}(c))}))}},be="[MESSAGES]SEND_REQUEST",fe="[MESSAGES]REQUEST_SUCCESS",Oe="[MESSAGES]REQUEST_FAILURE",he="[MESSAGES]NEW_MESSAGE",ge="[MESSAGES]UPDATE_MESSAGE",xe="[MESSAGES]DELETE_MESSAGE",ve=function(e,t){return function(s){s({type:be}),e.emit("get messages",{roomId:t},(function(e){var t=e.success,a=e.messages,c=e.error;s(t?function(e){return{type:fe,payload:e}}(a):function(e){return{type:Oe,payload:e}}(c))}))}},ye=function(e){return{type:he,payload:e}},Ne=function(e){return{type:ge,payload:e}},Se=s(154),Ee=s(155),we=(s(110),s(26)),Re=s(8),Te=function(e){var t=e.item,s=Object(a.useState)(!1),c=Object(we.a)(s,2),n=c[0],r=c[1];return Object(u.jsxs)("div",{className:"checkbox"===t.type?"checkBox":"formGroup",children:[Object(u.jsxs)("span",{className:"inputIcon",title:t.title,children:["name"===t.name&&Object(u.jsx)(Re.u,{}),"email"===t.name&&Object(u.jsx)(Re.g,{}),"username"===t.name&&Object(u.jsx)(Re.b,{}),"roomName"===t.name&&Object(u.jsx)(Re.j,{}),new RegExp("password","i").test(t.name)&&Object(u.jsx)(Re.h,{}),new RegExp("picture","i").test(t.name)&&Object(u.jsx)(Re.f,{})]}),Object(u.jsx)("input",{className:"file"===t.type?"input file":"checkbox"===t.type?"ml-2":"input",type:new RegExp("password","i").test(t.name)?n?"text":"password":t.type,placeholder:t.placeholder,ref:t.fieldRef,accept:"file"===t.type&&new RegExp("picture","i").test(t.name)?"image/*":null}),new RegExp("password","i").test(t.name)?n?Object(u.jsx)(Re.d,{className:"eyeIcon",onClick:function(){return r(!1)}}):Object(u.jsx)(Re.e,{className:"eyeIcon",onClick:function(){return r(!0)}}):null,"checkbox"===t.type&&Object(u.jsx)("label",{className:"lbl",children:t.placeholder})]})},ke=function(e){var t=e.name,s=e.items,a=e.submitHandler,c=Object(r.c)((function(e){return e.setting.loadingForm}));return Object(u.jsxs)(Se.a,{className:"d-flex flex-column",onSubmit:a,children:[s.map((function(e,t){return Object(u.jsx)(Te,{item:e},t)})),Object(u.jsx)(Ee.a,{type:"submit",disabled:c?"disabled":"",children:t})]})},Pe=function(e){var t=e.submitHandler,s=Object(r.b)(),c=Object(a.useRef)(""),n=Object(a.useRef)(""),i=Object(a.useRef)();Object(a.useEffect)((function(){var e=localStorage.getItem("SCA_USERNAME"),t=localStorage.getItem("SCA_PASSWORD");e&&t&&(c.current.value=e,n.current.value=t,i.current.checked=!0)}),[]);return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(ke,{name:"\u0648\u0631\u0648\u062f",items:[{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"password",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"remindMe",type:"checkbox",placeholder:"\u0645\u0646 \u0631\u0627 \u0628\u0647 \u062e\u0627\u0637\u0631 \u0628\u0633\u067e\u0627\u0631",fieldRef:i}],submitHandler:function(e){e.preventDefault();var s={username:c.current.value.trim(),password:n.current.value.trim()},a=function(e){return""===e.username?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:f.test(e.username)?""===e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.password.length<8?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a"}:{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a"}}(s),r=a.success,o=a.message;r?(i.current.checked?(localStorage.setItem("SCA_USERNAME",s.username),localStorage.setItem("SCA_PASSWORD",s.password)):(localStorage.removeItem("SCA_USERNAME"),localStorage.removeItem("SCA_PASSWORD")),t(s)):k("error",o)}}),Object(u.jsxs)("div",{className:"formActions",children:[Object(u.jsx)("span",{className:"formAction ml-1",children:"\u0628\u0627\u0632\u06cc\u0627\u0628\u06cc \u0631\u0645\u0632\u0639\u0628\u0648\u0631"}),"/",Object(u.jsx)("span",{className:"formAction mr-1",onClick:function(){return s(Z(!1))},children:"\u062b\u0628\u062a\u200c\u0646\u0627\u0645"})]})]})})},Me=function(e){var t=e.submitHandler,s=Object(r.b)(),c=Object(a.useRef)(""),n=Object(a.useRef)(""),i=Object(a.useRef)(""),o=Object(a.useRef)(""),l=Object(a.useRef)(""),d=Object(a.useRef)("");return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(ke,{name:"\u062b\u0628\u062a\u200c\u0646\u0627\u0645",items:[{name:"name",type:"text",title:"\u0646\u0627\u0645\u200c",placeholder:"\u0646\u0627\u0645\u200c \u0648 \u0646\u0627\u0645\u200c\u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:i},{name:"password",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:o},{name:"confirmPassword",type:"password",title:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f",fieldRef:l},{name:"profilePicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644",fieldRef:d}],submitHandler:function(e){e.preventDefault();var s={name:c.current.value.trim(),email:n.current.value.trim(),username:i.current.value.trim(),password:o.current.value.trim(),confirmPassword:l.current.value.trim(),profilePicture:d.current.files[0]},a=function(e){return""===e.name?{success:!1,message:"\u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:p.test(e.name)&&e.name.length>=3?""===e.email?{success:!1,message:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:b.test(e.email)?""===e.username?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:f.test(e.username)?""===e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.password.length<8?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 \u0634\u0627\u0645\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627\u0634\u062f"}:e.confirmPassword!==e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u06cc\u06a9\u0633\u0627\u0646 \u0646\u06cc\u0633\u062a"}:e.profilePicture&&"image/jpeg"!==e.profilePicture.type&&"image/jpg"!==e.profilePicture.type&&"image/png"!==e.profilePicture.type?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.profilePicture&&e.profilePicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648 \u0627\u0639\u062f\u0627\u062f \u0628\u0627\u0634\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u0635\u062d\u06cc\u062d \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}}(s),r=a.success,u=a.message;r?t(s):k("error",u)}}),Object(u.jsx)("div",{className:"formActions",children:Object(u.jsx)("span",{className:"formAction",onClick:function(){return s(Z(!0))},children:"\u0648\u0631\u0648\u062f"})})]})})},Ie=(s(112),function(e){var t=e.history,s=Object(r.c)((function(e){return{selectedMenuItem:e.setting.selectedMenuItem,socket:e.setting.socket}})),a=s.selectedMenuItem,c=s.socket,n=Object(r.b)();return Object(u.jsxs)("div",{className:"menu-bar",children:[Object(u.jsx)("h1",{className:"brand",children:"ShayanChat"}),Object(u.jsxs)("div",{className:"icons-container",children:[Object(u.jsx)("div",{className:"profile"===a?"icon active":"icon",onClick:function(){return n(B("profile"))},title:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644",children:Object(u.jsx)(Re.p,{})}),Object(u.jsx)("div",{className:"chats"===a?"icon active":"icon",onClick:function(){return n(B("chats"))},title:"\u0686\u062a\u200c\u0647\u0627",children:Object(u.jsx)(Re.m,{})}),Object(u.jsx)("div",{className:"icon",title:"\u062e\u0631\u0648\u062c",onClick:function(){c.disconnect(0),n(q(null)),n(le()),localStorage.removeItem("SCA_TOKEN"),t.push("/auth")},children:Object(u.jsx)(Re.r,{})})]})]})}),Ce=(s(113),function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=function(){t(ae(e,{search:s.current.value.trim()}))};return Object(u.jsxs)("div",{className:"search-box",children:[Object(u.jsx)("input",{className:"input",type:"text",placeholder:"\u062c\u0633\u062a\u062c\u0648 ...",ref:s,onChange:c}),Object(u.jsx)(Re.q,{className:"icon",onClick:c})]})}),_e=(s(114),function(){var e=Object(r.b)();return Object(u.jsxs)("div",{className:"chat-list-header",children:[Object(u.jsx)("h3",{children:"\u0686\u062a\u200c\u0647\u0627"}),Object(u.jsx)("span",{className:"plus-icon",title:"\u0633\u0627\u062e\u062a \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f",onClick:function(){e(K("createNewRoom")),e(Q(!0))},children:Object(u.jsx)(Re.k,{})})]})}),Ae=function(e){var t=e.room,s=e.active,a=Object(r.c)((function(e){return e.setting.socket})),c=Object(r.b)();return Object(u.jsx)("div",{onClick:function(){c(ue(a,t.id)),c(J(!0))},className:s?"chat-item active":"chat-item",children:Object(u.jsxs)("div",{className:"chat-item-info",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)("img",{className:"picture",src:t.roomPicture?"".concat(j,"/roomPictures/").concat(t.roomPicture):"/images/room.jpg",alt:t.name})}),Object(u.jsx)("div",{className:"text-container",children:Object(u.jsx)("span",{className:"name",children:t.name})})]})})},De=function(){var e=Object(r.c)((function(e){return{socket:e.setting.socket,rooms:e.rooms,currentRoom:e.room.data}})),t=e.socket,s=e.rooms,c=e.currentRoom,n=Object(r.b)();return Object(a.useEffect)((function(){t&&n(ae(t))}),[t]),Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)(_e,{}),Object(u.jsx)(Ce,{}),Object(u.jsx)("div",{className:s.loading?"chat-list text-center":"chat-list",children:s.loading?Object(u.jsx)(l.a,{animation:"border",variant:"secondary"}):Object(u.jsx)(a.Fragment,{children:s.data.map((function(e){return Object(u.jsx)(Ae,{room:e,active:c.id===e.id},e.id)}))})})]})},Ge=(s(115),function(e){var t=e.history,s=Object(a.useState)(!1),c=Object(we.a)(s,2),n=c[0],i=c[1],o=Object(r.c)((function(e){return{socket:e.setting.socket,user:e.user}})),l=o.socket,d=o.user,m=Object(r.b)();return Object(u.jsxs)(a.Fragment,{children:[Object(u.jsxs)("div",{className:"profile-header",children:[Object(u.jsx)("h3",{children:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}),Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Re.c,{className:"action-icon",onClick:function(){return i(!n)}}),Object(u.jsxs)("div",{className:n?"actions-popover":"d-none",children:[Object(u.jsxs)("span",{className:"action",onClick:function(){m(K("editProfile")),m(Q(!0))},children:[Object(u.jsx)(Re.n,{className:"ml-2"}),"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"]}),Object(u.jsxs)("span",{className:"action",onClick:function(){m(K("changePassword")),m(Q(!0))},children:[Object(u.jsx)(Re.h,{className:"ml-2"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631"]}),Object(u.jsxs)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&l.emit("delete acount",(function(e){var s=e.success,a=e.message;s?(localStorage.removeItem("SCA_TOKEN"),l.disconnect(0),m(q(null)),t.push("/auth"),k("success",a)):k("error",a)}))},children:[Object(u.jsx)(Re.o,{className:"ml-2"}),"\u062d\u0630\u0641 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc"]})]})]})]}),Object(u.jsxs)("div",{className:"profile-info",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)("img",{className:"picture",src:d.profilePicture?"".concat(j,"/profilePictures/").concat(d.profilePicture):"/images/user.png",alt:d.name})}),Object(u.jsx)("span",{className:"name",children:d.name})]}),Object(u.jsxs)("div",{className:"profile-detail",children:[Object(u.jsx)("div",{className:"header",children:Object(u.jsx)("span",{children:"\u0645\u0634\u062e\u0635\u0627\u062a"})}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0646\u0627\u0645"}),Object(u.jsx)("span",{children:d.name})]}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0627\u06cc\u0645\u06cc\u0644"}),Object(u.jsx)("span",{children:d.email})]}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc"}),Object(u.jsx)("span",{children:d.username})]})]})]})}),Ue=(s(116),function(){var e=Object(r.c)((function(e){return{windowInnerWidth:e.setting.windowInnerWidth,room:e.room.data}})),t=e.windowInnerWidth,s=e.room,a=Object(r.b)();return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{className:"right-side",children:[t<768&&Object(u.jsx)(Re.a,{className:"back-icon",onClick:function(){return a(J(!1))}}),Object(u.jsx)("img",{className:"picture",src:s.roomPicture?"".concat(j,"/roomPictures/").concat(s.roomPicture):"/images/room.jpg",alt:s.name}),Object(u.jsx)("span",{className:"font-weight-bold",children:s.name})]}),Object(u.jsx)(Re.c,{onClick:function(){a(K("roomInfo")),a(Q(!0))},className:"ellipsis-icon"})]})}),We=function(e){var t=e.message,s=Object(a.useState)(!1),c=Object(we.a)(s,2),n=c[0],i=c[1],o=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data}})),l=o.socket,d=o.room,m=Object(r.b)();return Object(u.jsxs)("div",{className:t.isOwner?"message-container":"message-container dir-ltr",children:[Object(u.jsx)("img",{className:t.isOwner?"picture ml-2":"picture mr-2",src:t.sender.profilePicture?"".concat(j,"/profilePictures/").concat(t.sender.profilePicture):"/images/user.png",alt:t.sender.name}),Object(u.jsxs)("div",{className:"message-text",children:[Object(u.jsx)("span",{className:"name",children:t.sender.name}),Object(u.jsx)("span",{className:"message",children:t.text}),Object(u.jsxs)("span",{className:"time",children:[Object(u.jsx)(Re.l,{})," ",t.date.split("-")[1]]})]}),t.isOwner&&Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Re.c,{style:{cursor:"pointer"},onClick:function(){return i(!n)}}),Object(u.jsxs)("div",{className:n?"actions-popover":"d-none",children:[Object(u.jsx)("span",{className:"action",onClick:function(){var e,s;m($(1)),m((e=t.text,{type:W,payload:e})),m((s=t.id,{type:U,payload:s})),i(!1)},children:"\u0648\u06cc\u0631\u0627\u06cc\u0634"}),Object(u.jsx)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u067e\u06cc\u0627\u0645 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&l.emit("delete message",{roomId:d.id,messageId:t.id}),i(!1)},children:"\u062d\u0630\u0641"})]})]})]})},He=function(e){var t=e.date,s=e.messages;return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"text-center text-muted my-2",children:Object(u.jsx)("span",{className:"date-span",children:t})}),s.map((function(e){return Object(u.jsx)(We,{message:e},e.id)}))]})},Fe=function(){var e=Object(a.useRef)(),t=Object(r.c)((function(e){return{socket:e.setting.socket,user:e.user,messages:e.messages,room:e.room,sendMessageType:e.setting.sendMessageType,editMessageText:e.setting.editMessageText}})),s=t.socket,c=t.user,n=t.messages,i=t.room,o=t.sendMessageType,l=t.editMessageText,m=Object(r.b)();return Object(a.useEffect)((function(){return s&&(m(ve(s,i.data.id)),s.on("new message",function(){var t=Object(x.a)(g.a.mark((function t(s){var a,n,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.roomId,n=s.newMessage,r=s.updateMessage,o=s.deleteMessage;try{a.toString()===i.data.id.toString()&&(n?(n.isOwner=n.sender.email===c.email,m(ye(n)),e.current.scroll(0,e.current.scrollHeight)):r?(r.isOwner=r.sender.email===c.email,m(Ne(r))):o&&m({type:xe,payload:o}))}catch(l){}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),function(){m($(0)),s.off("new message")}}),[]),Object(a.useEffect)((function(){e.current.scroll(0,e.current.scrollHeight)}),[n.data]),Object(u.jsx)("div",{ref:e,className:"body",children:n.loading?Object(u.jsx)(d,{}):Object(u.jsxs)(a.Fragment,{children:[n.data&&Object.keys(n.data).map((function(e,t){return Object(u.jsx)(He,{date:e,messages:n.data[e]},t)})),1===o&&Object(u.jsxs)("div",{className:"edit-box",children:[Object(u.jsx)(Re.t,{style:{cursor:"pointer"},onClick:function(){return m($(0))}}),Object(u.jsx)("span",{className:"edit-box-text text-muted",children:l})]})]})})},Le=function(){var e=Object(a.useRef)(""),t=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data,sendMessageType:e.setting.sendMessageType,editMessageId:e.setting.editMessageId,editMessageText:e.setting.editMessageText}})),s=t.socket,c=t.room,n=t.sendMessageType,i=t.editMessageId,o=t.editMessageText,l=Object(r.b)();Object(a.useEffect)((function(){1===n&&e.current?e.current.value=o:e.current&&(e.current.value="")}),[n,i]);var d=function(){var t=e.current.value.trim();t&&(0===n?s.emit("send message",{message:t,roomId:c.id}):s.emit("edit message",{message:t,roomId:c.id,messageId:i}),l($(0)),e.current.value="")};return Object(u.jsx)("div",{className:"footer",children:c.isJoined?Object(u.jsxs)("div",{className:"chat-box",children:[Object(u.jsx)("input",{className:"input",onKeyPress:function(e){"Enter"===e.key&&d()},ref:e}),Object(u.jsx)(Re.i,{className:"mr-1",style:{cursor:"pointer"},onClick:d})]}):Object(u.jsx)(Ee.a,{className:"w-100",onClick:function(){s.emit("join room",{id:c.id},(function(e){var t=e.success,a=e.message;k(t?"success":"error",a),l(ae(s)),l(ue(s,c.id))}))},children:"\u0639\u0636\u0648\u06cc\u062a \u062f\u0631 \u06af\u0631\u0648\u0647"})})},ze=function(){return Object(u.jsxs)("div",{className:"chat-content-container",children:[Object(u.jsx)(Ue,{}),Object(u.jsx)(Fe,{}),Object(u.jsx)(Le,{})]})},Be=s(153),Qe=(s(117),function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=Object(a.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0627\u06cc\u062c\u0627\u062f \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f"}),Object(u.jsx)(ke,{name:"\u0627\u06cc\u062c\u0627\u062f \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f",items:[{name:"roomName",type:"text",title:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647",placeholder:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"roomPicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u06af\u0631\u0648\u0647",fieldRef:c}],submitHandler:function(a){a.preventDefault();var n={roomName:s.current.value.trim(),roomPicture:{data:c.current.files[0],name:c.current.files[0]?c.current.files[0].name:null,mimetype:c.current.files[0]?c.current.files[0].type:null,size:c.current.files[0]?c.current.files[0].size:null}},r=function(e){return""===e.roomName?{success:!1,message:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.roomPicture.data&&"image/jpeg"!==e.roomPicture.mimetype&&"image/jpg"!==e.roomPicture.mimetype&&"image/png"!==e.roomPicture.mimetype?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.roomPicture.data&&e.roomPicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}}(n),i=r.success,o=r.message;i?(t(z(!0)),e.emit("create new room",n,(function(s){var a=s.success,c=s.message;a?(t(Q(!1)),t(ae(e)),k("success",c)):k("error",c),t(z(!1))}))):k("error",o)}})]})}),Ke=function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=Object(a.useRef)(""),n=Object(a.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}),Object(u.jsx)(ke,{name:"\u0648\u06cc\u0631\u0627\u06cc\u0634",items:[{name:"name",type:"text",title:"\u0646\u0627\u0645\u200c",placeholder:"\u0646\u0627\u0645\u200c \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n}],submitHandler:function(a){a.preventDefault();var r={name:s.current.value.trim(),email:c.current.value.trim(),username:n.current.value.trim()},i=function(e){return""===e.name||p.test(e.name)&&e.name.length>=3?""===e.email||b.test(e.email)?""===e.username||f.test(e.username)?{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648 \u0627\u0639\u062f\u0627\u062f \u0628\u0627\u0634\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u0635\u062d\u06cc\u062d \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}}(r),o=i.success,l=i.message;o?(r.name||r.email||r.username)&&(t(z(!0)),e.emit("edit profile",r,(function(e){var s=e.success,a=e.message,c=e.user;s?(k("success",a),t(Y(c)),t(Q(!1))):k("error",a),t(z(!1))}))):k("error",l)}})]})},Je=function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(a.useRef)(""),c=Object(a.useRef)(""),n=Object(a.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631"}),Object(u.jsx)(ke,{name:"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631",items:[{name:"oldPassword",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"newPassword",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:c},{name:"confirmNewPassword",type:"password",title:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f",fieldRef:n}],submitHandler:function(a){a.preventDefault();var r={oldPassword:s.current.value.trim(),newPassword:c.current.value.trim(),confirmNewPassword:n.current.value.trim()},i=function(e){return""===e.oldPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:""===e.newPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.newPassword.length<8?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 \u0634\u0627\u0645\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627\u0634\u062f"}:e.confirmNewPassword!==e.newPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u06cc\u06a9\u0633\u0627\u0646 \u0646\u06cc\u0633\u062a"}:{success:!0}}(r),o=i.success,l=i.message;o?(t(z(!0)),e.emit("change password",r,(function(e){var s=e.success,a=e.message;s?(k("success",a),t(Q(!1))):k("error",a),t(z(!1))}))):k("error",l)}})]})},Ze=(s(118),function(e){var t=e.member;return Object(u.jsxs)("div",{className:"member-container",children:[Object(u.jsxs)("div",{className:"picture-container",children:[Object(u.jsx)("img",{className:"picture",src:t.profilePicture?"".concat(j,"/profilePictures/").concat(t.profilePicture):"/images/user.png",alt:t.name}),Object(u.jsx)("span",{className:t.isOnline?"online-badge bg-success":"online-badge bg-secondary"})]}),Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsxs)("span",{children:[t.name," ",t.isOwner&&Object(u.jsx)(Re.s,{})]}),Object(u.jsx)("span",{className:"text-muted small",children:t.isOnline?"Online":t.lastSeen})]})]})}),$e=function(){var e=Object(a.useState)(!1),t=Object(we.a)(e,2),s=t[0],c=t[1],n=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room,members:e.members}})),i=n.socket,o=n.room,d=n.members,m=Object(r.b)();Object(a.useEffect)((function(){i&&m(pe(i,o.data.id))}),[]);return Object(u.jsxs)("div",{className:"room-info-modal",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("img",{className:"room-picture",src:o.data.roomPicture?"".concat(j,"/roomPictures/").concat(o.data.roomPicture):"/images/room.jpg",alt:o.data.name}),Object(u.jsxs)("div",{className:"d-flex flex-column text-right",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:o.data.name}),Object(u.jsx)("span",{className:"text-muted small",children:o.data.id})]}),o.data.isJoined&&Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Re.c,{className:"action-icon",onClick:function(){return c(!s)}}),Object(u.jsxs)("div",{className:s?"actions-popover":"d-none",children:[o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){m(K("editGroup")),m(Q(!0))},children:[Object(u.jsx)(Re.n,{className:"ml-2"}),"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u06af\u0631\u0648\u0647"]}),o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u06af\u0631\u0648\u0647 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&(m(Q(!1)),m(L(!0)),i.emit("delete room",{id:o.data.id},(function(e){var t=e.success,s=e.message;t?(m(le()),m(ae(i)),k("success",s)):k("error",s),m(L(!1))})))},children:[Object(u.jsx)(Re.o,{className:"ml-2"}),"\u062d\u0630\u0641 \u06af\u0631\u0648\u0647"]}),!o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){i.emit("leave room",{id:o.data.id},(function(e){var t=e.success,s=e.message;t?(k("success",s),m(ae(i)),m(Q(!1)),m(le())):k("error",s)}))},children:[Object(u.jsx)(Re.r,{className:"ml-2"}),"\u062e\u0631\u0648\u062c \u0627\u0632 \u06af\u0631\u0648\u0647"]})]})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h6",{className:"px-3 py-2",children:"\u0627\u0639\u0636\u0627\u06cc \u06af\u0631\u0648\u0647"}),Object(u.jsx)("div",{className:"scroller",children:d.loading?Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(u.jsx)(l.a,{animation:"border",variant:"secondary"})}):d.data.map((function(e,t){return Object(u.jsx)(Ze,{member:e},t)}))})]})]})},qe=function(){var e=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data}})),t=e.socket,s=e.room,c=Object(r.b)(),n=Object(a.useRef)(""),i=Object(a.useRef)();return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u06af\u0631\u0648\u0647"}),Object(u.jsx)(ke,{name:"\u0648\u06cc\u0631\u0627\u06cc\u0634",items:[{name:"roomName",type:"text",title:"\u0646\u0627\u0645\u200c \u06af\u0631\u0648\u0647",placeholder:"\u0646\u0627\u0645\u200c \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"roomPicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u06af\u0631\u0648\u0647",fieldRef:i}],submitHandler:function(e){e.preventDefault();var a={id:s.id,roomName:n.current.value.trim(),roomPicture:{data:i.current.files[0],name:i.current.files[0]?i.current.files[0].name:null,mimetype:i.current.files[0]?i.current.files[0].type:null,size:i.current.files[0]?i.current.files[0].size:null}},r=function(e){return e.roomPicture.data&&"image/jpeg"!==e.roomPicture.mimetype&&"image/jpg"!==e.roomPicture.mimetype&&"image/png"!==e.roomPicture.mimetype?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.roomPicture.data&&e.roomPicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}}(a),o=r.success,l=r.message;o?(a.roomName||a.roomPicture.data)&&(c(z(!0)),t.emit("edit room",a,(function(e){var t=e.success,s=e.message;t?(k("success",s),c(Q(!1))):k("error",s),c(z(!1))}))):k("error",l)}})]})},Xe=function(){var e=Object(r.c)((function(e){return{showModal:e.setting.showModal,modalContent:e.setting.modalContent}})),t=e.showModal,s=e.modalContent,a=Object(r.b)();return Object(u.jsx)(Be.a,{show:t,onHide:function(){return a(Q(!1))},centered:!0,children:Object(u.jsxs)("div",{className:"p-3",children:["createNewRoom"===s&&Object(u.jsx)(Qe,{}),"editProfile"===s&&Object(u.jsx)(Ke,{}),"changePassword"===s&&Object(u.jsx)(Je,{}),"roomInfo"===s&&Object(u.jsx)($e,{}),"editGroup"===s&&Object(u.jsx)(qe,{})]})})},Ye=function(e){var t=e.history;return Object(a.useEffect)((function(){E().then((function(e){e.success?t.push("/chat"):t.push("/auth")}))}),[]),Object(u.jsx)(d,{})},Ve=function(e){var t=e.history,s=Object(r.c)((function(e){return{loadingPage:e.setting.loadingPage,isRegister:e.setting.isRegister}})),c=s.loadingPage,n=s.isRegister,i=Object(r.b)();Object(a.useEffect)((function(){return E().then((function(e){e.success&&t.push("/chat"),setTimeout((function(){i(L(!1))}),1e3)})),function(){i(L(!0))}}),[]);var o=function(){var e=Object(x.a)(g.a.mark((function e(s){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i(z(!0)),!s.confirmPassword){e.next=9;break}return e.next=5,N(s);case 5:a=e.sent,i(Z(!0)),e.next=14;break;case 9:return e.next=11,S(s);case 11:a=e.sent,localStorage.setItem("SCA_TOKEN",a.data.token),t.push("/chat");case 14:i(z(!1)),k("success",a.data.message),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),i(z(!1)),k("error",e.t0.response.data.message);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"d-flex flex-column align-items-center text-center justify-content-center h-100",children:c?Object(u.jsx)(d,{}):Object(u.jsxs)(a.Fragment,{children:[Object(u.jsx)("h1",{className:"appBrand mb-3",children:"ShayanChat"}),Object(u.jsx)("h3",{className:"mb-3 pb-3",children:n?"\u0648\u0631\u0648\u062f":"\u0639\u0636\u0648\u06cc\u062a"}),n?Object(u.jsx)(Pe,{submitHandler:o}):Object(u.jsx)(Me,{submitHandler:o})]})})},et=s(152),tt=s(75),st=s(77),at=s.n(st),ct=function(e){var t=e.history,s=Object(r.c)((function(e){return{loadingPage:e.setting.loadingPage,selectedMenuItem:e.setting.selectedMenuItem,showChats:e.setting.showChats,room:e.room,windowInnerWidth:e.setting.windowInnerWidth,socket:e.setting.socket}})),c=s.loadingPage,n=s.selectedMenuItem,i=s.showChats,o=s.room,l=s.windowInnerWidth,m=s.socket,j=Object(r.b)(),p=function(){j({type:H})};return Object(a.useEffect)((function(){return E().then((function(e){var s=e.success,a=e.user;s?(j(Y(a)),m||j(q(at()({query:{token:localStorage.getItem("SCA_TOKEN")}}))),setTimeout((function(){j(L(!1))}),1e3),window.addEventListener("resize",p)):t.push("/auth")})),function(){j(L(!0)),window.removeEventListener("resize",p)}}),[]),Object(a.useEffect)((function(){return m&&m.on("change room data",(function(e){var t=e.room;j(function(e){return{type:oe,payload:e}}(t)),j(function(e){return{type:se,payload:e}}(t))})),function(){m&&m.off("change room data")}}),[m]),Object(u.jsx)("div",{className:"d-flex h-100",children:c?Object(u.jsx)(d,{}):Object(u.jsxs)(a.Fragment,{children:[(l>768||!i)&&Object(u.jsx)(Ie,{history:t}),Object(u.jsxs)(et.a,{className:"h-100 w-100 m-0",children:[Object(u.jsx)(tt.a,{className:i&&l<768?"d-none":"p-0",lg:4,md:5,children:Object(u.jsxs)("div",{className:"chat-right-side-bar",children:["profile"===n&&Object(u.jsx)(Ge,{history:t}),"chats"===n&&Object(u.jsx)(De,{})]})}),Object(u.jsx)(tt.a,{className:l>768||i?"p-0 bg-light":"d-none",lg:8,md:7,children:o.loading?Object(u.jsx)(d,{}):o.data.name?Object(u.jsx)(ze,{}):Object(u.jsxs)("div",{className:"empty-chat-box",children:[l<768&&Object(u.jsx)(Re.a,{className:"back-icon",onClick:function(){return j(J(!1))}}),o.error?o.error:"ShayanChat"]})})]})]})})},nt=s(25),rt=s(78),it=s(79),ot=s(9),lt={loadingPage:!0,loadingForm:!1,selectedMenuItem:"chats",showModal:!1,modalContent:"",isRegister:!0,showChats:!1,sendMessageType:0,editMessageId:0,editMessageText:"",windowInnerWidth:window.innerWidth,socket:null},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(ot.a)(Object(ot.a)({},e),{},{loadingPage:t.payload});case M:return Object(ot.a)(Object(ot.a)({},e),{},{loadingForm:t.payload});case I:return Object(ot.a)(Object(ot.a)({},e),{},{selectedMenuItem:t.payload});case C:return Object(ot.a)(Object(ot.a)({},e),{},{showModal:t.payload});case _:return Object(ot.a)(Object(ot.a)({},e),{},{modalContent:t.payload});case A:return Object(ot.a)(Object(ot.a)({},e),{},{showChats:t.payload});case D:return Object(ot.a)(Object(ot.a)({},e),{},{isRegister:t.payload});case G:return Object(ot.a)(Object(ot.a)({},e),{},{sendMessageType:t.payload});case U:return Object(ot.a)(Object(ot.a)({},e),{},{editMessageId:t.payload});case W:return Object(ot.a)(Object(ot.a)({},e),{},{editMessageText:t.payload});case H:return Object(ot.a)(Object(ot.a)({},e),{},{windowInnerWidth:window.innerWidth});case F:return Object(ot.a)(Object(ot.a)({},e),{},{socket:t.payload});default:return e}},dt={},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return t.payload;default:return e}},jt={loading:!1,data:[],error:""},pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(ot.a)(Object(ot.a)({},e),{},{loading:!0});case ee:return{loading:!1,data:t.payload,error:""};case te:return{loading:!1,data:[],error:t.payload};case se:var s=e.data.findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==s&&(t.payload.name&&(e.data[s].name=t.payload.name),t.payload.roomPicture&&(e.data[s].roomPicture=t.payload.roomPicture)),{loading:!1,data:e.data,error:""};default:return e}},bt={loading:!1,data:{},error:""},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(ot.a)(Object(ot.a)({},e),{},{loading:!0});case ne:return{loading:!1,data:t.payload,error:""};case re:return{loading:!1,data:{},error:t.payload};case ie:return{loading:!1,data:{},error:""};case oe:return e.data.id&&e.data.id.toString()===t.payload.id.toString()&&(t.payload.name&&(e.data.name=t.payload.name),t.payload.roomPicture&&(e.data.roomPicture=t.payload.roomPicture)),{loading:!1,data:e.data,error:""};default:return e}},Ot={loading:!1,data:[],error:""},ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(ot.a)(Object(ot.a)({},e),{},{loading:!0});case me:return{loading:!1,data:t.payload,error:""};case je:return{loading:!1,data:[],error:t.payload};default:return e}},gt={loading:!1,data:{},error:""},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(ot.a)(Object(ot.a)({},e),{},{loading:!0});case fe:return{loading:!1,data:t.payload,error:""};case Oe:return{loading:!1,data:{},error:t.payload};case he:var s=t.payload.date.split("-")[0];return e.data[s]||(e.data[s]=[]),e.data[s].push(t.payload),{loading:!1,data:e.data,error:""};case ge:var a=t.payload.date.split("-")[0],c=e.data[a].findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==c&&(e.data[a][c]=t.payload),{loading:!1,data:e.data,error:""};case xe:var n=t.payload.date.split("-")[0],r=e.data[n].findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==r&&e.data[n].splice(r,1),0===e.data[n].length&&delete e.data[n],{loading:!1,data:e.data,error:""};default:return e}},vt=Object(nt.combineReducers)({setting:ut,user:mt,rooms:pt,room:ft,members:ht,messages:xt}),yt=Object(nt.createStore)(vt,Object(rt.composeWithDevTools)(Object(nt.applyMiddleware)(it.a))),Nt=function(){return Object(u.jsx)(r.a,{store:yt,children:Object(u.jsxs)(i.a,{children:[Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:Ye}),Object(u.jsx)(o.a,{path:"/auth",component:Ve}),Object(u.jsx)(o.a,{path:"/chat",component:ct})]}),Object(u.jsx)(Xe,{})]})})};n.a.render(Object(u.jsx)(Nt,{}),document.getElementById("root"))},86:function(e,t,s){}},[[149,1,2]]]);
//# sourceMappingURL=main.193c0eaa.chunk.js.map
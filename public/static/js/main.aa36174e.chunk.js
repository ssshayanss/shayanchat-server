(this["webpackJsonpshayan-chat-client"]=this["webpackJsonpshayan-chat-client"]||[]).push([[0],{110:function(e,t,s){},112:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},149:function(e,t,s){"use strict";s.r(t);var c=s(0),n=s(21),a=s.n(n),r=(s(85),s(86),s(4)),i=s(80),o=s(10),l=s(151),u=s(1),d=function(){return Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(u.jsx)(l.a,{animation:"border",variant:"secondary"})})},m=s(156),j="https://shayanchat.herokuapp.com/",b=/^[A-Za-z\u0600-\u06FF\s]+$/,f=/^\S+@\S+.\S+$/,p=/^[A-Za-z][A-Za-z0-9]*$/,O=1048576,h=s(23),g=s.n(h),x=s(28),v=s(37),N=s.n(v),y=function(e){var t=new FormData;return t.append("name",e.name),t.append("email",e.email),t.append("username",e.username),t.append("password",e.password),t.append("profilePicture",e.profilePicture),N.a.post("/api/auth/signup",t)},S=function(e){return N.a.post("/api/auth/signin",e)},E=function(){var e=Object(x.a)(g.a.mark((function e(){var t,s,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(t=localStorage.getItem("SCA_TOKEN"))){e.next=14;break}return e.next=5,N.a.get("/api/auth",{headers:{Authorization:"Bearer ".concat(t)}});case 5:if(s=e.sent,!(c=s.data).success){e.next=11;break}return e.abrupt("return",{success:!0,user:c.user});case 11:return e.abrupt("return",{success:!1});case 12:e.next=15;break;case 14:return e.abrupt("return",{success:!1});case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",{success:!1});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}(),w=s(38),R=s.n(w),T=R.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",R.a.stopTimer),e.addEventListener("mouseleave",R.a.resumeTimer)}}),k=function(e,t){T.fire({icon:e,title:t})},P="[SETTING]SET_LOADING_PAGE",M="[SETTING]SET_LOADING_FORM",I="[SETTING]SELECT_MENU_ITEM",C="[SETTING]SET_SHOW_MODAL",_="[SETTING]SET_MODAL_CONTENT",A="[SETTING]SET_SHOW_CHATS",G="[SETTING]SET_IS_REGISTERED",D="[SETTING]SET_SEND_MESSAGE_TYPE",U="[SETTING]SET_EDIT_MESSAGE_ID",W="[SETTING]SET_EDIT_MESSAGE_TEXT",H="[SETTING]SET_WINDOW_INNERWIDTH",F="[SETTING]SET_SOCKET",L=function(e){return{type:P,payload:e}},z=function(e){return{type:M,payload:e}},B=function(e){return{type:I,payload:e}},Q=function(e){return{type:C,payload:e}},K=function(e){return{type:_,payload:e}},J=function(e){return{type:A,payload:e}},Z=function(e){return{type:G,payload:e}},$=function(e){return{type:D,payload:e}},q=function(e){return{type:F,payload:e}},X="[USER]SET_USER_DATA",Y=function(e){return{type:X,payload:e}},V="[ROOMS]SEND_REQUEST",ee="[ROOMS]REQUEST_SUCCESS",te="[ROOMS]REQUEST_FAILURE",se=function(e,t){return function(s){var c=t&&""!==t?t:{};s({type:V}),e.emit("get rooms",c,(function(e){var t=e.success,c=e.rooms,n=e.error;s(t?function(e){return{type:ee,payload:e}}(c):function(e){return{type:te,payload:e}}(n))}))}},ce="[ROOM]SEND_REQUEST",ne="[ROOM]REQUEST_SUCCESS",ae="[ROOM]REQUEST_FAILURE",re="[ROOM]RESET_ROOM",ie=function(){return{type:re}},oe=function(e,t){return function(s){s({type:ce}),e.emit("get room",{id:t},(function(e){var t=e.success,c=e.room,n=e.error;s(t?function(e){return{type:ne,payload:e}}(c):function(e){return{type:ae,payload:e}}(n))}))}},le="[MEMBERS]SEND_REQUEST",ue="[MEMBERS]REQUEST_SUCCESS",de="[MEMBERS]REQUEST_FAILURE",me=function(e,t){return function(s){s({type:le}),e.emit("get room members",{id:t},(function(e){var t=e.success,c=e.members,n=e.error;s(t?function(e){return{type:ue,payload:e}}(c):function(e){return{type:de,payload:e}}(n))}))}},je="[MESSAGES]SEND_REQUEST",be="[MESSAGES]REQUEST_SUCCESS",fe="[MESSAGES]REQUEST_FAILURE",pe="[MESSAGES]NEW_MESSAGE",Oe="[MESSAGES]UPDATE_MESSAGE",he="[MESSAGES]DELETE_MESSAGE",ge=function(e,t){return function(s){s({type:je}),e.emit("get messages",{roomId:t},(function(e){var t=e.success,c=e.messages,n=e.error;s(t?function(e){return{type:be,payload:e}}(c):function(e){return{type:fe,payload:e}}(n))}))}},xe=function(e){return{type:pe,payload:e}},ve=function(e){return{type:Oe,payload:e}},Ne=s(154),ye=s(155),Se=(s(110),s(26)),Ee=s(8),we=function(e){var t=e.item,s=Object(c.useState)(!1),n=Object(Se.a)(s,2),a=n[0],r=n[1];return Object(u.jsxs)("div",{className:"checkbox"===t.type?"checkBox":"formGroup",children:[Object(u.jsxs)("span",{className:"inputIcon",title:t.title,children:["name"===t.name&&Object(u.jsx)(Ee.u,{}),"email"===t.name&&Object(u.jsx)(Ee.g,{}),"username"===t.name&&Object(u.jsx)(Ee.b,{}),"roomName"===t.name&&Object(u.jsx)(Ee.j,{}),new RegExp("password","i").test(t.name)&&Object(u.jsx)(Ee.h,{}),new RegExp("picture","i").test(t.name)&&Object(u.jsx)(Ee.f,{})]}),Object(u.jsx)("input",{className:"file"===t.type?"input file":"checkbox"===t.type?"ml-2":"input",type:new RegExp("password","i").test(t.name)?a?"text":"password":t.type,placeholder:t.placeholder,ref:t.fieldRef,accept:"file"===t.type&&new RegExp("picture","i").test(t.name)?"image/*":null}),new RegExp("password","i").test(t.name)?a?Object(u.jsx)(Ee.d,{className:"eyeIcon",onClick:function(){return r(!1)}}):Object(u.jsx)(Ee.e,{className:"eyeIcon",onClick:function(){return r(!0)}}):null,"checkbox"===t.type&&Object(u.jsx)("label",{className:"lbl",children:t.placeholder})]})},Re=function(e){var t=e.name,s=e.items,c=e.submitHandler,n=Object(r.c)((function(e){return e.setting.loadingForm}));return Object(u.jsxs)(Ne.a,{className:"d-flex flex-column",onSubmit:c,children:[s.map((function(e,t){return Object(u.jsx)(we,{item:e},t)})),Object(u.jsx)(ye.a,{type:"submit",disabled:n?"disabled":"",children:t})]})},Te=function(e){var t=e.submitHandler,s=Object(r.b)(),n=Object(c.useRef)(""),a=Object(c.useRef)(""),i=Object(c.useRef)();Object(c.useEffect)((function(){var e=localStorage.getItem("SCA_USERNAME"),t=localStorage.getItem("SCA_PASSWORD");e&&t&&(n.current.value=e,a.current.value=t,i.current.checked=!0)}),[]);return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(Re,{name:"\u0648\u0631\u0648\u062f",items:[{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"password",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:a},{name:"remindMe",type:"checkbox",placeholder:"\u0645\u0646 \u0631\u0627 \u0628\u0647 \u062e\u0627\u0637\u0631 \u0628\u0633\u067e\u0627\u0631",fieldRef:i}],submitHandler:function(e){e.preventDefault();var s={username:n.current.value.trim(),password:a.current.value.trim()},c=function(e){return""===e.username?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:p.test(e.username)?""===e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.password.length<8?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a"}:{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u06cc\u0627 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0646\u0627\u0645\u0639\u062a\u0628\u0631 \u0627\u0633\u062a"}}(s),r=c.success,o=c.message;r?(i.current.checked?(localStorage.setItem("SCA_USERNAME",s.username),localStorage.setItem("SCA_PASSWORD",s.password)):(localStorage.removeItem("SCA_USERNAME"),localStorage.removeItem("SCA_PASSWORD")),t(s)):k("error",o)}}),Object(u.jsxs)("div",{className:"formActions",children:[Object(u.jsx)("span",{className:"formAction ml-1",children:"\u0628\u0627\u0632\u06cc\u0627\u0628\u06cc \u0631\u0645\u0632\u0639\u0628\u0648\u0631"}),"/",Object(u.jsx)("span",{className:"formAction mr-1",onClick:function(){return s(Z(!1))},children:"\u062b\u0628\u062a\u200c\u0646\u0627\u0645"})]})]})})},ke=function(e){var t=e.submitHandler,s=Object(r.b)(),n=Object(c.useRef)(""),a=Object(c.useRef)(""),i=Object(c.useRef)(""),o=Object(c.useRef)(""),l=Object(c.useRef)(""),d=Object(c.useRef)("");return Object(u.jsx)("div",{children:Object(u.jsxs)(m.a,{className:"auth-card",children:[Object(u.jsx)(Re,{name:"\u062b\u0628\u062a\u200c\u0646\u0627\u0645",items:[{name:"name",type:"text",title:"\u0646\u0627\u0645\u200c",placeholder:"\u0646\u0627\u0645\u200c \u0648 \u0646\u0627\u0645\u200c\u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:a},{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:i},{name:"password",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:o},{name:"confirmPassword",type:"password",title:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f",fieldRef:l},{name:"profilePicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644",fieldRef:d}],submitHandler:function(e){e.preventDefault();var s={name:n.current.value.trim(),email:a.current.value.trim(),username:i.current.value.trim(),password:o.current.value.trim(),confirmPassword:l.current.value.trim(),profilePicture:d.current.files[0]},c=function(e){return""===e.name?{success:!1,message:"\u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:b.test(e.name)&&e.name.length>=3?""===e.email?{success:!1,message:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:f.test(e.email)?""===e.username?{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:p.test(e.username)?""===e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.password.length<8?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 \u0634\u0627\u0645\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627\u0634\u062f"}:e.confirmPassword!==e.password?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u06cc\u06a9\u0633\u0627\u0646 \u0646\u06cc\u0633\u062a"}:e.profilePicture&&"image/jpeg"!==e.profilePicture.type&&"image/jpg"!==e.profilePicture.type&&"image/png"!==e.profilePicture.type?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.profilePicture&&e.profilePicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648 \u0627\u0639\u062f\u0627\u062f \u0628\u0627\u0634\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u0635\u062d\u06cc\u062d \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}}(s),r=c.success,u=c.message;r?t(s):k("error",u)}}),Object(u.jsx)("div",{className:"formActions",children:Object(u.jsx)("span",{className:"formAction",onClick:function(){return s(Z(!0))},children:"\u0648\u0631\u0648\u062f"})})]})})},Pe=(s(112),function(e){var t=e.history,s=Object(r.c)((function(e){return{selectedMenuItem:e.setting.selectedMenuItem,socket:e.setting.socket}})),c=s.selectedMenuItem,n=s.socket,a=Object(r.b)();return Object(u.jsxs)("div",{className:"menu-bar",children:[Object(u.jsx)("h1",{className:"brand",children:"ShayanChat"}),Object(u.jsxs)("div",{className:"icons-container",children:[Object(u.jsx)("div",{className:"profile"===c?"icon active":"icon",onClick:function(){return a(B("profile"))},title:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644",children:Object(u.jsx)(Ee.p,{})}),Object(u.jsx)("div",{className:"chats"===c?"icon active":"icon",onClick:function(){return a(B("chats"))},title:"\u0686\u062a\u200c\u0647\u0627",children:Object(u.jsx)(Ee.m,{})}),Object(u.jsx)("div",{className:"icon",title:"\u062e\u0631\u0648\u062c",onClick:function(){n.disconnect(0),a(q(null)),a(ie()),localStorage.removeItem("SCA_TOKEN"),t.push("/auth")},children:Object(u.jsx)(Ee.r,{})})]})]})}),Me=(s(113),function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(c.useRef)(""),n=function(){t(se(e,{search:s.current.value.trim()}))};return Object(u.jsxs)("div",{className:"search-box",children:[Object(u.jsx)("input",{className:"input",type:"text",placeholder:"\u062c\u0633\u062a\u062c\u0648 ...",ref:s,onChange:n}),Object(u.jsx)(Ee.q,{className:"icon",onClick:n})]})}),Ie=(s(114),function(){var e=Object(r.b)();return Object(u.jsxs)("div",{className:"chat-list-header",children:[Object(u.jsx)("h3",{children:"\u0686\u062a\u200c\u0647\u0627"}),Object(u.jsx)("span",{className:"plus-icon",title:"\u0633\u0627\u062e\u062a \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f",onClick:function(){e(K("createNewRoom")),e(Q(!0))},children:Object(u.jsx)(Ee.k,{})})]})}),Ce=function(e){var t=e.room,s=e.active,c=Object(r.c)((function(e){return e.setting.socket})),n=Object(r.b)();return Object(u.jsx)("div",{onClick:function(){n(oe(c,t.id)),n(J(!0))},className:s?"chat-item active":"chat-item",children:Object(u.jsxs)("div",{className:"chat-item-info",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)("img",{className:"picture",src:t.roomPicture?"".concat(j,"/roomPictures/").concat(t.roomPicture):"/images/room.jpg",alt:t.name})}),Object(u.jsx)("div",{className:"text-container",children:Object(u.jsx)("span",{className:"name",children:t.name})})]})})},_e=function(){var e=Object(r.c)((function(e){return{socket:e.setting.socket,rooms:e.rooms,currentRoom:e.room.data}})),t=e.socket,s=e.rooms,n=e.currentRoom,a=Object(r.b)();return Object(c.useEffect)((function(){t&&a(se(t))}),[t]),Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)(Ie,{}),Object(u.jsx)(Me,{}),Object(u.jsx)("div",{className:s.loading?"chat-list text-center":"chat-list",children:s.loading?Object(u.jsx)(l.a,{animation:"border",variant:"secondary"}):Object(u.jsx)(c.Fragment,{children:s.data.map((function(e){return Object(u.jsx)(Ce,{room:e,active:n.id===e.id},e.id)}))})})]})},Ae=(s(115),function(e){var t=e.history,s=Object(c.useState)(!1),n=Object(Se.a)(s,2),a=n[0],i=n[1],o=Object(r.c)((function(e){return{socket:e.setting.socket,user:e.user}})),l=o.socket,d=o.user,m=Object(r.b)();return Object(u.jsxs)(c.Fragment,{children:[Object(u.jsxs)("div",{className:"profile-header",children:[Object(u.jsx)("h3",{children:"\u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}),Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Ee.c,{className:"action-icon",onClick:function(){return i(!a)}}),Object(u.jsxs)("div",{className:a?"actions-popover":"d-none",children:[Object(u.jsxs)("span",{className:"action",onClick:function(){m(K("editProfile")),m(Q(!0))},children:[Object(u.jsx)(Ee.n,{className:"ml-2"}),"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"]}),Object(u.jsxs)("span",{className:"action",onClick:function(){m(K("changePassword")),m(Q(!0))},children:[Object(u.jsx)(Ee.h,{className:"ml-2"}),"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631"]}),Object(u.jsxs)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&l.emit("delete acount",(function(e){var s=e.success,c=e.message;s?(localStorage.removeItem("SCA_TOKEN"),l.disconnect(0),m(q(null)),t.push("/auth"),k("success",c)):k("error",c)}))},children:[Object(u.jsx)(Ee.o,{className:"ml-2"}),"\u062d\u0630\u0641 \u062d\u0633\u0627\u0628 \u06a9\u0627\u0631\u0628\u0631\u06cc"]})]})]})]}),Object(u.jsxs)("div",{className:"profile-info",children:[Object(u.jsx)("div",{className:"picture-container",children:Object(u.jsx)("img",{className:"picture",src:d.profilePicture?"".concat(j,"/profilePictures/").concat(d.profilePicture):"/images/user.png",alt:d.name})}),Object(u.jsx)("span",{className:"name",children:d.name})]}),Object(u.jsxs)("div",{className:"profile-detail",children:[Object(u.jsx)("div",{className:"header",children:Object(u.jsx)("span",{children:"\u0645\u0634\u062e\u0635\u0627\u062a"})}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0646\u0627\u0645"}),Object(u.jsx)("span",{children:d.name})]}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0627\u06cc\u0645\u06cc\u0644"}),Object(u.jsx)("span",{children:d.email})]}),Object(u.jsxs)("div",{className:"item",children:[Object(u.jsx)("span",{className:"text-muted",children:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc"}),Object(u.jsx)("span",{children:d.username})]})]})]})}),Ge=(s(116),function(){var e=Object(r.c)((function(e){return{windowInnerWidth:e.setting.windowInnerWidth,room:e.room.data}})),t=e.windowInnerWidth,s=e.room,c=Object(r.b)();return Object(u.jsxs)("div",{className:"header",children:[Object(u.jsxs)("div",{className:"right-side",children:[t<768&&Object(u.jsx)(Ee.a,{className:"back-icon",onClick:function(){return c(J(!1))}}),Object(u.jsx)("img",{className:"picture",src:s.roomPicture?"".concat(j,"/roomPictures/").concat(s.roomPicture):"/images/room.jpg",alt:s.name}),Object(u.jsx)("span",{className:"font-weight-bold",children:s.name})]}),Object(u.jsx)(Ee.c,{onClick:function(){c(K("roomInfo")),c(Q(!0))},className:"ellipsis-icon"})]})}),De=function(e){var t=e.message,s=Object(c.useState)(!1),n=Object(Se.a)(s,2),a=n[0],i=n[1],o=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data}})),l=o.socket,d=o.room,m=Object(r.b)();return Object(u.jsxs)("div",{className:"message-container",children:[Object(u.jsx)("img",{className:"picture",src:t.sender.profilePicture?"".concat(j,"/profilePictures/").concat(t.sender.profilePicture):"/images/user.png",alt:t.sender.name}),Object(u.jsxs)("div",{className:"message-text",children:[Object(u.jsx)("span",{className:"name",children:t.sender.name}),Object(u.jsx)("span",{className:"message",children:t.text}),Object(u.jsxs)("span",{className:"time",children:[Object(u.jsx)(Ee.l,{})," ",t.date]})]}),t.isOwner&&Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Ee.c,{style:{cursor:"pointer"},onClick:function(){return i(!a)}}),Object(u.jsxs)("div",{className:a?"actions-popover":"d-none",children:[Object(u.jsx)("span",{className:"action",onClick:function(){var e,s;m($(1)),m((e=t.text,{type:W,payload:e})),m((s=t.id,{type:U,payload:s})),i(!1)},children:"\u0648\u06cc\u0631\u0627\u06cc\u0634"}),Object(u.jsx)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u067e\u06cc\u0627\u0645 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&l.emit("delete message",{roomId:d.id,messageId:t.id}),i(!1)},children:"\u062d\u0630\u0641"})]})]})]})},Ue=function(){var e=Object(c.useRef)(),t=Object(r.c)((function(e){return{socket:e.setting.socket,user:e.user,messages:e.messages,room:e.room,sendMessageType:e.setting.sendMessageType,editMessageText:e.setting.editMessageText}})),s=t.socket,n=t.user,a=t.messages,i=t.room,o=t.sendMessageType,l=t.editMessageText,m=Object(r.b)();return Object(c.useEffect)((function(){return s&&(m(ge(s,i.data.id)),s.on("new message",function(){var t=Object(x.a)(g.a.mark((function t(s){var c,a,r,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=s.roomId,a=s.newMessage,r=s.updateMessage,o=s.deleteMessage;try{c.toString()===i.data.id.toString()&&(a?(a.isOwner=a.sender.email===n.email,m(xe(a)),e.current.scroll(0,e.current.scrollHeight)):r?(r.isOwner=r.sender.email===n.email,m(ve(r))):o&&m({type:he,payload:o}))}catch(l){}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),function(){m($(0)),s.off("new message")}}),[]),Object(c.useEffect)((function(){e.current.scroll(0,e.current.scrollHeight)}),[a.data]),Object(u.jsx)("div",{ref:e,className:"body",children:a.loading?Object(u.jsx)(d,{}):Object(u.jsxs)(c.Fragment,{children:[a.data&&a.data.map((function(e){return Object(u.jsx)(De,{message:e},e.id)})),1===o&&Object(u.jsxs)("div",{className:"edit-box",children:[Object(u.jsx)(Ee.t,{style:{cursor:"pointer"},onClick:function(){return m($(0))}}),Object(u.jsx)("span",{className:"edit-box-text text-muted",children:l})]})]})})},We=function(){var e=Object(c.useRef)(""),t=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data,sendMessageType:e.setting.sendMessageType,editMessageId:e.setting.editMessageId,editMessageText:e.setting.editMessageText}})),s=t.socket,n=t.room,a=t.sendMessageType,i=t.editMessageId,o=t.editMessageText,l=Object(r.b)();Object(c.useEffect)((function(){1===a&&e.current?e.current.value=o:e.current&&(e.current.value="")}),[a,i]);var d=function(){var t=e.current.value.trim();t&&(0===a?s.emit("send message",{message:t,roomId:n.id}):s.emit("edit message",{message:t,roomId:n.id,messageId:i}),l($(0)),e.current.value="")};return Object(u.jsx)("div",{className:"footer",children:n.isJoined?Object(u.jsxs)("div",{className:"chat-box",children:[Object(u.jsx)("input",{className:"input",onKeyPress:function(e){"Enter"===e.key&&d()},ref:e}),Object(u.jsx)(Ee.i,{className:"mr-1",style:{cursor:"pointer"},onClick:d})]}):Object(u.jsx)(ye.a,{className:"w-100",onClick:function(){s.emit("join room",{id:n.id},(function(e){var t=e.success,c=e.message;k(t?"success":"error",c),l(se(s)),l(oe(s,n.id))}))},children:"\u0639\u0636\u0648\u06cc\u062a \u062f\u0631 \u06af\u0631\u0648\u0647"})})},He=function(){return Object(u.jsxs)("div",{className:"chat-content-container",children:[Object(u.jsx)(Ge,{}),Object(u.jsx)(Ue,{}),Object(u.jsx)(We,{})]})},Fe=s(153),Le=(s(117),function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(c.useRef)(""),n=Object(c.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0627\u06cc\u062c\u0627\u062f \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f"}),Object(u.jsx)(Re,{name:"\u0627\u06cc\u062c\u0627\u062f \u06af\u0631\u0648\u0647 \u062c\u062f\u06cc\u062f",items:[{name:"roomName",type:"text",title:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647",placeholder:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"roomPicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u06af\u0631\u0648\u0647",fieldRef:n}],submitHandler:function(c){c.preventDefault();var a={roomName:s.current.value.trim(),roomPicture:{data:n.current.files[0],name:n.current.files[0]?n.current.files[0].name:null,mimetype:n.current.files[0]?n.current.files[0].type:null,size:n.current.files[0]?n.current.files[0].size:null}},r=function(e){return""===e.roomName?{success:!1,message:"\u0646\u0627\u0645 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.roomPicture.data&&"image/jpeg"!==e.roomPicture.mimetype&&"image/jpg"!==e.roomPicture.mimetype&&"image/png"!==e.roomPicture.mimetype?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.roomPicture.data&&e.roomPicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}}(a),i=r.success,o=r.message;i?(t(z(!0)),e.emit("create new room",a,(function(s){var c=s.success,n=s.message;c?(t(Q(!1)),t(se(e)),k("success",n)):k("error",n),t(z(!1))}))):k("error",o)}})]})}),ze=function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(c.useRef)(""),n=Object(c.useRef)(""),a=Object(c.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u067e\u0631\u0648\u0641\u0627\u06cc\u0644"}),Object(u.jsx)(Re,{name:"\u0648\u06cc\u0631\u0627\u06cc\u0634",items:[{name:"name",type:"text",title:"\u0646\u0627\u0645\u200c",placeholder:"\u0646\u0627\u0645\u200c \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"email",type:"email",title:"\u0627\u06cc\u0645\u06cc\u0644",placeholder:"\u0627\u06cc\u0645\u06cc\u0644 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"username",type:"text",title:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc",placeholder:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:a}],submitHandler:function(c){c.preventDefault();var r={name:s.current.value.trim(),email:n.current.value.trim(),username:a.current.value.trim()},i=function(e){return""===e.name||b.test(e.name)&&e.name.length>=3?""===e.email||f.test(e.email)?""===e.username||p.test(e.username)?{success:!0}:{success:!1,message:"\u0646\u0627\u0645\u200c\u06a9\u0627\u0631\u0628\u0631\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0634\u0627\u0645\u0644 \u062d\u0631\u0648\u0641 \u0644\u0627\u062a\u06cc\u0646 \u0648 \u0627\u0639\u062f\u0627\u062f \u0628\u0627\u0634\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u06cc\u06a9 \u0627\u06cc\u0645\u06cc\u0644 \u0645\u0639\u062a\u0628\u0631 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:{success:!1,message:"\u0644\u0637\u0641\u0627 \u0646\u0627\u0645 \u062e\u0648\u062f \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u0635\u062d\u06cc\u062d \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}}(r),o=i.success,l=i.message;o?(r.name||r.email||r.username)&&(t(z(!0)),e.emit("edit profile",r,(function(e){var s=e.success,c=e.message,n=e.user;s?(k("success",c),t(Y(n)),t(Q(!1))):k("error",c),t(z(!1))}))):k("error",l)}})]})},Be=function(){var e=Object(r.c)((function(e){return e.setting.socket})),t=Object(r.b)(),s=Object(c.useRef)(""),n=Object(c.useRef)(""),a=Object(c.useRef)("");return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631"}),Object(u.jsx)(Re,{name:"\u062a\u063a\u06cc\u06cc\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631",items:[{name:"oldPassword",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:s},{name:"newPassword",type:"password",title:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:n},{name:"confirmNewPassword",type:"password",title:"\u062a\u06a9\u0631\u0627\u0631 \u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f",placeholder:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u0631\u0627 \u062a\u06a9\u0631\u0627\u0631 \u06a9\u0646\u06cc\u062f",fieldRef:a}],submitHandler:function(c){c.preventDefault();var r={oldPassword:s.current.value.trim(),newPassword:n.current.value.trim(),confirmNewPassword:a.current.value.trim()},i=function(e){return""===e.oldPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0641\u0639\u0644\u06cc \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:""===e.newPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u062c\u062f\u06cc\u062f \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f"}:e.newPassword.length<8?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0628\u0627\u06cc\u062f \u062d\u062f\u0627\u0642\u0644 \u0634\u0627\u0645\u0644 8 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631 \u0628\u0627\u0634\u062f"}:e.confirmNewPassword!==e.newPassword?{success:!1,message:"\u0631\u0645\u0632\u0639\u0628\u0648\u0631 \u0648 \u062a\u06a9\u0631\u0627\u0631 \u0622\u0646 \u06cc\u06a9\u0633\u0627\u0646 \u0646\u06cc\u0633\u062a"}:{success:!0}}(r),o=i.success,l=i.message;o?(t(z(!0)),e.emit("change password",r,(function(e){var s=e.success,c=e.message;s?(k("success",c),t(Q(!1))):k("error",c),t(z(!1))}))):k("error",l)}})]})},Qe=(s(118),function(e){var t=e.member;return Object(u.jsxs)("div",{className:"member-container",children:[Object(u.jsxs)("div",{className:"picture-container",children:[Object(u.jsx)("img",{className:"picture",src:t.profilePicture?"".concat(j,"/profilePictures/").concat(t.profilePicture):"/images/user.png",alt:t.name}),Object(u.jsx)("span",{className:t.isOnline?"online-badge bg-success":"online-badge bg-secondary"})]}),Object(u.jsxs)("div",{className:"d-flex flex-column",children:[Object(u.jsxs)("span",{children:[t.name," ",t.isOwner&&Object(u.jsx)(Ee.s,{})]}),Object(u.jsx)("span",{className:"text-muted small",children:t.isOnline?"Online":t.lastSeen})]})]})}),Ke=function(){var e=Object(c.useState)(!1),t=Object(Se.a)(e,2),s=t[0],n=t[1],a=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room,members:e.members}})),i=a.socket,o=a.room,d=a.members,m=Object(r.b)();Object(c.useEffect)((function(){i&&m(me(i,o.data.id))}),[]);return Object(u.jsxs)("div",{className:"room-info-modal",children:[Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)("img",{className:"room-picture",src:o.data.roomPicture?"".concat(j,"/roomPictures/").concat(o.data.roomPicture):"/images/room.jpg",alt:o.data.name}),Object(u.jsxs)("div",{className:"d-flex flex-column text-right",children:[Object(u.jsx)("span",{className:"font-weight-bold",children:o.data.name}),Object(u.jsx)("span",{className:"text-muted small",children:o.data.id})]}),o.data.isJoined&&Object(u.jsxs)("div",{className:"actions-container",children:[Object(u.jsx)(Ee.c,{className:"action-icon",onClick:function(){return n(!s)}}),Object(u.jsxs)("div",{className:s?"actions-popover":"d-none",children:[o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){m(K("editGroup")),m(Q(!0))},children:[Object(u.jsx)(Ee.n,{className:"ml-2"}),"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u06af\u0631\u0648\u0647"]}),o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){window.confirm("\u0622\u06cc\u0627 \u0627\u0632 \u062d\u0630\u0641 \u06af\u0631\u0648\u0647 \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062f\u0627\u0631\u06cc\u062f\u061f")&&(m(Q(!1)),m(L(!0)),i.emit("delete room",{id:o.data.id},(function(e){var t=e.success,s=e.message;t?(m(ie()),m(se(i)),k("success",s)):k("error",s),m(L(!1))})))},children:[Object(u.jsx)(Ee.o,{className:"ml-2"}),"\u062d\u0630\u0641 \u06af\u0631\u0648\u0647"]}),!o.data.isOwner&&Object(u.jsxs)("span",{className:"action",onClick:function(){i.emit("leave room",{id:o.data.id},(function(e){var t=e.success,s=e.message;t?(k("success",s),m(se(i)),m(Q(!1)),m(ie())):k("error",s)}))},children:[Object(u.jsx)(Ee.r,{className:"ml-2"}),"\u062e\u0631\u0648\u062c \u0627\u0632 \u06af\u0631\u0648\u0647"]})]})]})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("h6",{className:"px-3 py-2",children:"\u0627\u0639\u0636\u0627\u06cc \u06af\u0631\u0648\u0647"}),Object(u.jsx)("div",{className:"scroller",children:d.loading?Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-100",children:Object(u.jsx)(l.a,{animation:"border",variant:"secondary"})}):d.data.map((function(e,t){return Object(u.jsx)(Qe,{member:e},t)}))})]})]})},Je=function(){var e=Object(r.c)((function(e){return{socket:e.setting.socket,room:e.room.data}})),t=e.socket,s=e.room,n=Object(r.b)(),a=Object(c.useRef)(""),i=Object(c.useRef)();return Object(u.jsxs)("div",{className:"modal-form",children:[Object(u.jsx)("h6",{className:"header",children:"\u0648\u06cc\u0631\u0627\u06cc\u0634 \u06af\u0631\u0648\u0647"}),Object(u.jsx)(Re,{name:"\u0648\u06cc\u0631\u0627\u06cc\u0634",items:[{name:"roomName",type:"text",title:"\u0646\u0627\u0645\u200c \u06af\u0631\u0648\u0647",placeholder:"\u0646\u0627\u0645\u200c \u06af\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f",fieldRef:a},{name:"roomPicture",type:"file",title:"\u062a\u0635\u0648\u06cc\u0631 \u06af\u0631\u0648\u0647",fieldRef:i}],submitHandler:function(e){e.preventDefault();var c={id:s.id,roomName:a.current.value.trim(),roomPicture:{data:i.current.files[0],name:i.current.files[0]?i.current.files[0].name:null,mimetype:i.current.files[0]?i.current.files[0].type:null,size:i.current.files[0]?i.current.files[0].size:null}},r=function(e){return e.roomPicture.data&&"image/jpeg"!==e.roomPicture.mimetype&&"image/jpg"!==e.roomPicture.mimetype&&"image/png"!==e.roomPicture.mimetype?{success:!1,message:"\u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06cc\u06a9\u06cc \u0627\u0632 \u0641\u0631\u0645\u062a\u200c\u0647\u0627\u06cc jpg \u06cc\u0627 jpeg \u06cc\u0627 png \u0628\u0627\u0634\u062f"}:e.roomPicture.data&&e.roomPicture.size>O?{success:!1,message:"\u062d\u062c\u0645 \u0639\u06a9\u0633 \u0645\u0648\u0631\u062f\u0646\u0638\u0631 \u0628\u0627\u06cc\u062f \u06a9\u0645\u062a\u0631 \u0627\u0632 ".concat(Math.floor(1.048576),"MB \u0628\u0627\u0634\u062f")}:{success:!0}}(c),o=r.success,l=r.message;o?(c.roomName||c.roomPicture.data)&&(n(z(!0)),t.emit("edit room",c,(function(e){var c=e.success,a=e.message;c?(n(oe(t,s.id)),n(se(t)),k("success",a),n(Q(!1))):k("error",a),n(z(!1))}))):k("error",l)}})]})},Ze=function(){var e=Object(r.c)((function(e){return{showModal:e.setting.showModal,modalContent:e.setting.modalContent}})),t=e.showModal,s=e.modalContent,c=Object(r.b)();return Object(u.jsx)(Fe.a,{show:t,onHide:function(){return c(Q(!1))},centered:!0,children:Object(u.jsxs)("div",{className:"p-3",children:["createNewRoom"===s&&Object(u.jsx)(Le,{}),"editProfile"===s&&Object(u.jsx)(ze,{}),"changePassword"===s&&Object(u.jsx)(Be,{}),"roomInfo"===s&&Object(u.jsx)(Ke,{}),"editGroup"===s&&Object(u.jsx)(Je,{})]})})},$e=function(e){var t=e.history;return Object(c.useEffect)((function(){E().then((function(e){e.success?t.push("/chat"):t.push("/auth")}))}),[]),Object(u.jsx)(d,{})},qe=function(e){var t=e.history,s=Object(r.c)((function(e){return{loadingPage:e.setting.loadingPage,isRegister:e.setting.isRegister}})),n=s.loadingPage,a=s.isRegister,i=Object(r.b)();Object(c.useEffect)((function(){return E().then((function(e){e.success&&t.push("/chat"),setTimeout((function(){i(L(!1))}),1e3)})),function(){i(L(!0))}}),[]);var o=function(){var e=Object(x.a)(g.a.mark((function e(s){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i(z(!0)),!s.confirmPassword){e.next=9;break}return e.next=5,y(s);case 5:c=e.sent,i(Z(!0)),e.next=14;break;case 9:return e.next=11,S(s);case 11:c=e.sent,localStorage.setItem("SCA_TOKEN",c.data.token),t.push("/chat");case 14:i(z(!1)),k("success",c.data.message),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),i(z(!1)),k("error",e.t0.response.data.message);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"d-flex flex-column align-items-center text-center justify-content-center h-100",children:n?Object(u.jsx)(d,{}):Object(u.jsxs)(c.Fragment,{children:[Object(u.jsx)("h1",{className:"appBrand mb-3",children:"ShayanChat"}),Object(u.jsx)("h3",{className:"mb-3 pb-3",children:a?"\u0648\u0631\u0648\u062f":"\u0639\u0636\u0648\u06cc\u062a"}),a?Object(u.jsx)(Te,{submitHandler:o}):Object(u.jsx)(ke,{submitHandler:o})]})})},Xe=s(152),Ye=s(75),Ve=s(77),et=s.n(Ve),tt=function(e){var t=e.history,s=Object(r.c)((function(e){return{loadingPage:e.setting.loadingPage,selectedMenuItem:e.setting.selectedMenuItem,showChats:e.setting.showChats,room:e.room,windowInnerWidth:e.setting.windowInnerWidth,socket:e.setting.socket}})),n=s.loadingPage,a=s.selectedMenuItem,i=s.showChats,o=s.room,l=s.windowInnerWidth,m=s.socket,j=Object(r.b)(),b=function(){j({type:H})};return Object(c.useEffect)((function(){return E().then((function(e){var s=e.success,c=e.user;s?(j(Y(c)),m||j(q(et()({query:{token:localStorage.getItem("SCA_TOKEN")}})))):t.push("/auth"),setTimeout((function(){j(L(!1))}),1e3),window.addEventListener("resize",b)})),function(){j(L(!0)),window.removeEventListener("resize",b)}}),[]),Object(u.jsx)("div",{className:"d-flex h-100",children:n?Object(u.jsx)(d,{}):Object(u.jsxs)(c.Fragment,{children:[(l>768||!i)&&Object(u.jsx)(Pe,{history:t}),Object(u.jsxs)(Xe.a,{className:"h-100 w-100 m-0",children:[Object(u.jsx)(Ye.a,{className:i&&l<768?"d-none":"p-0",lg:4,md:5,children:Object(u.jsxs)("div",{className:"chat-right-side-bar",children:["profile"===a&&Object(u.jsx)(Ae,{history:t}),"chats"===a&&Object(u.jsx)(_e,{})]})}),Object(u.jsx)(Ye.a,{className:l>768||i?"p-0 bg-light":"d-none",lg:8,md:7,children:o.loading?Object(u.jsx)(d,{}):o.data.name?Object(u.jsx)(He,{}):Object(u.jsxs)("div",{className:"empty-chat-box",children:[l<768&&Object(u.jsx)(Ee.a,{className:"back-icon",onClick:function(){return j(J(!1))}}),o.error?o.error:"ShayanChat"]})})]})]})})},st=s(25),ct=s(78),nt=s(79),at=s(9),rt={loadingPage:!0,loadingForm:!1,selectedMenuItem:"chats",showModal:!1,modalContent:"",isRegister:!0,showChats:!1,sendMessageType:0,editMessageId:0,editMessageText:"",windowInnerWidth:window.innerWidth,socket:null},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(at.a)(Object(at.a)({},e),{},{loadingPage:t.payload});case M:return Object(at.a)(Object(at.a)({},e),{},{loadingForm:t.payload});case I:return Object(at.a)(Object(at.a)({},e),{},{selectedMenuItem:t.payload});case C:return Object(at.a)(Object(at.a)({},e),{},{showModal:t.payload});case _:return Object(at.a)(Object(at.a)({},e),{},{modalContent:t.payload});case A:return Object(at.a)(Object(at.a)({},e),{},{showChats:t.payload});case G:return Object(at.a)(Object(at.a)({},e),{},{isRegister:t.payload});case D:return Object(at.a)(Object(at.a)({},e),{},{sendMessageType:t.payload});case U:return Object(at.a)(Object(at.a)({},e),{},{editMessageId:t.payload});case W:return Object(at.a)(Object(at.a)({},e),{},{editMessageText:t.payload});case H:return Object(at.a)(Object(at.a)({},e),{},{windowInnerWidth:window.innerWidth});case F:return Object(at.a)(Object(at.a)({},e),{},{socket:t.payload});default:return e}},ot={},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return t.payload;default:return e}},ut={loading:!1,data:[],error:""},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(at.a)(Object(at.a)({},e),{},{loading:!0});case ee:return{loading:!1,data:t.payload,error:""};case te:return{loading:!1,data:[],error:t.payload};default:return e}},mt={loading:!1,data:{},error:""},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(at.a)(Object(at.a)({},e),{},{loading:!0});case ne:return{loading:!1,data:t.payload,error:""};case ae:return{loading:!1,data:{},error:t.payload};case re:return{loading:!1,data:{},error:""};default:return e}},bt={loading:!1,data:[],error:""},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(at.a)(Object(at.a)({},e),{},{loading:!0});case ue:return{loading:!1,data:t.payload,error:""};case de:return{loading:!1,data:[],error:t.payload};default:return e}},pt={loading:!1,data:[],error:""},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(at.a)(Object(at.a)({},e),{},{loading:!0});case be:return{loading:!1,data:t.payload,error:""};case fe:return{loading:!1,data:[],error:t.payload};case pe:return e.data.push(t.payload),{loading:!1,data:e.data,error:""};case Oe:var s=e.data.findIndex((function(e){return e.id.toString()===t.payload.id.toString()}));return-1!==s&&(e.data[s]=t.payload),{loading:!1,data:e.data,error:""};case he:var c=e.data.findIndex((function(e){return e.id.toString()===t.payload.toString()}));return-1!==c&&e.data.splice(c,1),{loading:!1,data:e.data,error:""};default:return e}},ht=Object(st.combineReducers)({setting:it,user:lt,rooms:dt,room:jt,members:ft,messages:Ot}),gt=Object(st.createStore)(ht,Object(ct.composeWithDevTools)(Object(st.applyMiddleware)(nt.a))),xt=function(){return Object(u.jsx)(r.a,{store:gt,children:Object(u.jsxs)(i.a,{children:[Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{exact:!0,path:"/",component:$e}),Object(u.jsx)(o.a,{path:"/auth",component:qe}),Object(u.jsx)(o.a,{path:"/chat",component:tt})]}),Object(u.jsx)(Ze,{})]})})};a.a.render(Object(u.jsx)(xt,{}),document.getElementById("root"))},86:function(e,t,s){}},[[149,1,2]]]);
//# sourceMappingURL=main.aa36174e.chunk.js.map